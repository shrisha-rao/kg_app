Script started on Wed Sep 24 16:19:12 2025
]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app^[[A^DAgent pid 22474
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hl
zsh: do you wish to see all 186 possibilities (47 lines)? n[J[A[0m[27m[24m[26Cl[K[?2004l
[J[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;31mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hlDocuments/MVPs/app/research-kg-app[34D~                                 [33D sscripts[?1l>[?2004l
]2;scripts]1;scripts[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hlls[?1l>[?2004l
]2;ls -G]1;ls[1m[36m__pycache__[39;49m[0m            local_arango_setup.sh  [31mtest.sh[39;49m[0m
[31mbuild.sh[39;49m[0m               local_arango_setup.sh~ test_embedding.py
[31mdeploy.sh[39;49m[0m              [31mterraform-apply.sh[39;49m[0m     test_embedding.py~
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hcchmop d +x pwd[?1l>[?2004l
]2;chmod +x pwd]1;chmodchmod: pwd: No such file or directory
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004hppwd[?1l>[?2004l
]2;pwd]1;pwd/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hlls[?1l>[?2004l
]2;ls -G]1;ls[1m[36m__pycache__[39;49m[0m            local_arango_setup.sh  [31mtest.sh[39;49m[0m
[31mbuild.sh[39;49m[0m               local_arango_setup.sh~ test_embedding.py
[31mdeploy.sh[39;49m[0m              [31mterraform-apply.sh[39;49m[0m     test_embedding.py~
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hcchmmo od    od +x local_arango_setup.sh[?1l>[?2004l
]2;chmod +x local_arango_setup.sh]1;chmod[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hlls[?1l>[?2004l
]2;ls -G]1;ls[1m[36m__pycache__[39;49m[0m            [31mlocal_arango_setup.sh[39;49m[0m  [31mtest.sh[39;49m[0m
[31mbuild.sh[39;49m[0m               local_arango_setup.sh~ test_embedding.py
[31mdeploy.sh[39;49m[0m              [31mterraform-apply.sh[39;49m[0m     test_embedding.py~
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hlls -l[?1l>[?2004l
]2;ls -G -l]1;lstotal 32
drwxr-xr-x  3 shrisha  staff    96 Sep 17 06:24 [1m[36m__pycache__[39;49m[0m
-rwxr-xr-x  1 shrisha  staff     0 Sep 16 17:11 [31mbuild.sh[39;49m[0m
-rwxr-xr-x  1 shrisha  staff     0 Sep 16 17:11 [31mdeploy.sh[39;49m[0m
-rwxr-xr-x  1 shrisha  staff   868 Sep 24 16:18 [31mlocal_arango_setup.sh[39;49m[0m
-rw-r--r--  1 shrisha  staff   562 Sep 24 16:17 local_arango_setup.sh~
-rwxr-xr-x  1 shrisha  staff     0 Sep 16 17:11 [31mterraform-apply.sh[39;49m[0m
-rwxr-xr-x  1 shrisha  staff     0 Sep 16 17:11 [31mtest.sh[39;49m[0m
-rw-r--r--@ 1 shrisha  staff  3067 Sep 17 06:22 test_embedding.py
-rw-r--r--@ 1 shrisha  staff  3069 Sep 17 06:22 test_embedding.py~
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hls -lt[?1l>[?2004l
]2;ls -G -lt]1;lstotal 32
-rwxr-xr-x  1 shrisha  staff   868 Sep 24 16:18 [31mlocal_arango_setup.sh[39;49m[0m
-rw-r--r--  1 shrisha  staff   562 Sep 24 16:17 local_arango_setup.sh~
drwxr-xr-x  3 shrisha  staff    96 Sep 17 06:24 [1m[36m__pycache__[39;49m[0m
-rw-r--r--@ 1 shrisha  staff  3067 Sep 17 06:22 test_embedding.py
-rw-r--r--@ 1 shrisha  staff  3069 Sep 17 06:22 test_embedding.py~
-rwxr-xr-x  1 shrisha  staff     0 Sep 16 17:11 [31mterraform-apply.sh[39;49m[0m
-rwxr-xr-x  1 shrisha  staff     0 Sep 16 17:11 [31mtest.sh[39;49m[0m
-rwxr-xr-x  1 shrisha  staff     0 Sep 16 17:11 [31mbuild.sh[39;49m[0m
-rwxr-xr-x  1 shrisha  staff     0 Sep 16 17:11 [31mdeploy.sh[39;49m[0m
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004h../local_arango_setup.sh[1m [0m[0m [?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shf6d40067452eaf523a8b36c844597dee0cdf9a7f6cb5a08984b6ef4c0c261b46
docker: Error response from daemon: Conflict. The container name "/arangodb" is already in use by container "510dddeb72cde841f18711eb02dfc4875cbea9c370ad877bbd579a448bba604d". You have to remove (or rename) that container to be able to reuse that name.

Run 'docker run --help' for more information
docker: 'docker run' requires at least 1 argument

Usage:  docker run [OPTIONS] IMAGE [COMMAND] [ARG...]

See 'docker run --help' for more information
./local_arango_setup.sh: line 22: -v: command not found
./local_arango_setup.sh: line 23: -w: command not found
./local_arango_setup.sh: line 24: -e: command not found
./local_arango_setup.sh: line 25: -e: command not found
./local_arango_setup.sh: line 26: -e: command not found
./local_arango_setup.sh: line 27: -e: command not found
./local_arango_setup.sh: line 28: -it: command not found
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h./local_arango_setup.sh[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shError response from daemon: network with name app-net already exists
docker: Error response from daemon: Conflict. The container name "/arangodb" is already in use by container "510dddeb72cde841f18711eb02dfc4875cbea9c370ad877bbd579a448bba604d". You have to remove (or rename) that container to be able to reuse that name.

Run 'docker run --help' for more information
docker: 'docker run' requires at least 1 argument

Usage:  docker run [OPTIONS] IMAGE [COMMAND] [ARG...]

See 'docker run --help' for more information
./local_arango_setup.sh: line 22: -v: command not found
./local_arango_setup.sh: line 23: -w: command not found
./local_arango_setup.sh: line 24: -e: command not found
./local_arango_setup.sh: line 25: -e: command not found
./local_arango_setup.sh: line 26: -e: command not found
./local_arango_setup.sh: line 27: -e: command not found
./local_arango_setup.sh: line 28: -it: command not found
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h./local_arango_setup.sh[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shError response from daemon: network with name app-net already exists
9f45dd26158df40828d9cd20ce50bc8929933a4d366e44128004a5039bc226a9
docker: 'docker run' requires at least 1 argument

Usage:  docker run [OPTIONS] IMAGE [COMMAND] [ARG...]

See 'docker run --help' for more information
./local_arango_setup.sh: line 22: -v: command not found
./local_arango_setup.sh: line 23: -w: command not found
./local_arango_setup.sh: line 24: -e: command not found
./local_arango_setup.sh: line 25: -e: command not found
./local_arango_setup.sh: line 26: -e: command not found
./local_arango_setup.sh: line 27: -e: command not found
./local_arango_setup.sh: line 28: -it: command not found
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004hlls[?1l>[?2004l
]2;ls -G]1;ls[1m[36m__pycache__[39;49m[0m            [31mlocal_arango_setup.sh[39;49m[0m  [31mtest.sh[39;49m[0m
[31mbuild.sh[39;49m[0m               local_arango_setup.sh~ test_embedding.py
[31mdeploy.sh[39;49m[0m              [31mterraform-apply.sh[39;49m[0m     test_embedding.py~
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hccat local_arango_setup.sh[?1l>[?2004l
]2;cat local_arango_setup.sh]1;cat# This will:

# Create the network if missing.

# Start ArangoDB if not already running.

# Wait until ArangoDB is fully ready.

# Launch your tester container interactively with proper environment variables.

#!/bin/bash
set -e

# Configuration
NETWORK_NAME="app-net"
ARANGO_CONTAINER="arangodb"
ARANGO_ROOT_PASSWORD="my-secret-password"
TESTER_IMAGE="research-kg-app-embedding-tester:latest"
APP_DIR="$(pwd)"

# Create network if it doesn't exist
if ! docker network ls --format '{{.Name}}' | grep -w "$NETWORK_NAME" > /dev/null; then
    echo "Creating Docker network: $NETWORK_NAME"
    docker network create "$NETWORK_NAME"
else
    echo "Docker network $NETWORK_NAME already exists"
fi

# Run ArangoDB
if ! docker ps --format '{{.Names}}' | grep -w "$ARANGO_CONTAINER" > /dev/null; then
    echo "Starting ArangoDB container..."
    docker run -d \
        --name "$ARANGO_CONTAINER" \
        --network "$NETWORK_NAME" \
        -e ARANGO_ROOT_PASSWORD="$ARANGO_ROOT_PASSWORD" \
        -p 8529:8529 \
        arangodb/arangodb
else
    echo "ArangoDB container already running"
fi

# Wait for ArangoDB to be ready
echo "Waiting for ArangoDB to be ready..."
until docker exec "$ARANGO_CONTAINER" curl -sSf http://localhost:8529/_api/version > /dev/null 2>&1; do
    echo -n "."
    sleep 2
done
echo -e "\nArangoDB is ready!"

# Run tester container
echo "Starting tester container..."
docker run --rm \
    --network "$NETWORK_NAME" \
    -v "$APP_DIR":/app \
    -w /app \
    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \
    -e ARANGODB_USERNAME="root" \
    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \
    -e ARANGODB_DATABASE="_system" \
    -it "$TESTER_IMAGE" /bin/bash
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hcat local_arango_setup.sh[25Dls                       [23D./local_arango_setup.sh[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shDocker network app-net already exists
Starting ArangoDB container...
e54639a7d42804165f958a59e03428c078185abc847d03af1bfc6f65511c650a
Waiting for ArangoDB to be ready...
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
^[[A^[[B-n .
-n .
^C
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h./local_arango_setup.sh[H[2J[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m ./local_arango_setup.sh[K[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shDocker network app-net already exists
Starting ArangoDB container...
9d0ba6f411cd7f21e4247002cfcab05f9270fbae7495a3120c8bb8138c3f3e1b
Waiting for ArangoDB to be ready...
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
^C-e 
ArangoDB is ready!
Starting tester container...
^Cdocker: Error response from daemon: bind-mount /proc/7066/ns/net -> /var/run/docker/netns/1888219d4c0d: no such file or directory

Run 'docker run --help' for more information
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h./local_arango_setup.sh[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shDocker network app-net already exists
Starting ArangoDB container...
519910537b154472c430353405620e29322c8f9142020635e119d4e3652b95d7
Waiting for ArangoDB to be ready...
-n .
-n .
^C
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h./local_arango_setup.sh[H[2J[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m ./local_arango_setup.sh[K[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shDocker network app-net already exists
Starting ArangoDB container...
bc8dc8d3f4c99a5648c2e15b098b407e1ed3423a2a8b888de1bb1ba8deed1309
Waiting for ArangoDB to be ready...
./local_arango_setup.sh: line 47: syntax error near unexpected token `done'
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h./local_arango_setup.sh[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shDocker network app-net already exists
ArangoDB container already running
Waiting for ArangoDB to be ready...
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
-n .
^C
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[H[2J[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [Kccat local_arango_setup.sh[?1l>[?2004l
]2;cat local_arango_setup.sh]1;cat# This will:

# Create the network if missing.

# Start ArangoDB if not already running.

# Wait until ArangoDB is fully ready.

# Launch your tester container interactively with proper environment variables.

#!/bin/bash
set -e

# Configuration
NETWORK_NAME="app-net"
ARANGO_CONTAINER="arangodb"
ARANGO_ROOT_PASSWORD="my-secret-password"
TESTER_IMAGE="research-kg-app-embedding-tester:latest"
APP_DIR="$(pwd)"

# Create network if it doesn't exist
if ! docker network ls --format '{{.Name}}' | grep -w "$NETWORK_NAME" > /dev/null; then
    echo "Creating Docker network: $NETWORK_NAME"
    docker network create "$NETWORK_NAME"
else
    echo "Docker network $NETWORK_NAME already exists"
fi

# Run ArangoDB
if ! docker ps --format '{{.Names}}' | grep -w "$ARANGO_CONTAINER" > /dev/null; then
    echo "Starting ArangoDB container..."
    docker run -d \
        --name "$ARANGO_CONTAINER" \
        --network "$NETWORK_NAME" \
        -e ARANGO_ROOT_PASSWORD="$ARANGO_ROOT_PASSWORD" \
        -p 8529:8529 \
        arangodb/arangodb
else
    echo "ArangoDB container already running"
fi

# Wait for ArangoDB to be ready
echo "Waiting for ArangoDB to be ready..."
until docker exec "$ARANGO_CONTAINER" curl -sSf http://localhost:8529/_api/version > /dev/null 2>&1; do
    # echo -n "."
    sleep 2
done
echo -e "\nArangoDB is ready!"

# Run tester container
echo "Starting tester container..."
docker run --rm \
    --network "$NETWORK_NAME" \
    -v "$APP_DIR":/app \
    -w /app \
    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \
    -e ARANGODB_USERNAME="root" \
    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \
    -e ARANGODB_DATABASE="_system" \
    -it "$TESTER_IMAGE" /bin/bash
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004h[H[2J[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [Kcat local_arango_setup.sh[25D./[P[P[21C  [?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shDocker network app-net already exists
Starting ArangoDB container...
193eaad72c0df386ab5112b13686c96a68170c23658c4087587cdff241e4a3f7
Waiting for ArangoDB to be ready...
^C
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[7mdocker network ls[27m[17D[27md[27mo[27mc[27mk[27me[27mr[27m [27mn[27me[27mt[27mw[27mo[27mr[27mk[27m [27ml[27ms[?1l>[?2004l
]2;docker network ls]1;dockerNETWORK ID     NAME                      DRIVER    SCOPE
f6d40067452e   app-net                   bridge    local
0230be08c87c   bridge                    bridge    local
e1a3d61dd376   host                      host      local
914fe4340b62   none                      null      local
0eafcfec3f90   research-kg-app_default   bridge    local
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hddocker network rm [7mapp-net[27m[27ma[27mp[27mp[27m-[27mn[27me[27mt[?1l>[?2004l
]2;docker network rm app-net]1;dockerapp-net
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hdocker network rm app-net[10Dls        [8D[?1l>[?2004l
]2;docker network ls]1;dockerNETWORK ID     NAME                      DRIVER    SCOPE
0230be08c87c   bridge                    bridge    local
e1a3d61dd376   host                      host      local
914fe4340b62   none                      null      local
0eafcfec3f90   research-kg-app_default   bridge    local
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hdocker network lsrm app-net[10Dls        [8D[17D./local_arango_setup.sh[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shCreating Docker network: app-net
1ee1d167acfd1d4a17d1a181944726d383a393dccb688a5c9439dffb6cf83b55
Starting ArangoDB container...
4846171d5f77fe42a799025c1dbfa6ab08fef108b3fc609948d578a2c69c5e08
Waiting for ArangoDB to be ready...
^C
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h./local_arango_setup.sh[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shDocker network app-net already exists
ArangoDB container already running
Waiting for ArangoDB to be ready...
^C
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[7mdocker exec "$ARANGO_CONTAINER" curl -sSf http://localhost:8529/_api/vers[7mi[7mon[27m[K[A[15C[27md[27mo[27mc[27mk[27me[27mr[27m [27me[27mx[27me[27mc[27m [27m"[27m$[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[27m"[27m [27mc[27mu[27mr[27ml[27m [27m-[27ms[27mS[27mf[27m [27mh[27mt[27mt[27mp[27m:[27m/[27m/[27ml[27mo[27mc[27ma[27ml[27mh[27mo[27ms[27mt[27m:[27m8[27m5[27m2[27m9[27m/[27m_[27ma[27mp[27mi[27m/[27mv[27me[27mr[27msi[27mo[27mn[A[15C[K[1B[K[A[18C[7mARANGO_CONTAINER="arangodb"[27m[27D[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[27m=[27m"[27ma[27mr[27ma[27mn[27mg[27mo[27md[27mb[27m"[?1l>[?2004l[1B]2;ARANGO_CONTAINER="arangodb" ]1;[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hARANGO_CONTAINER="arangodb"[27D./local_arango_setup.sh    [23Ddocker network ls      rm app-net                    d  [7mARANGO_CONTAINER="arangodb"[27m[27D[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[27m=[27m"[27ma[27mr[27ma[27mn[27mg[27mo[27md[27mb[27m                         A  [7mdocker exec "$ARANGO_CONTAINER" curl -sSf http://localhost:8529/_api/vers[7mi[7mon[27m[K[A[15C[27md[27mo[27mc[27mk[27me[27mr[27m [27me[27mx[27me[27mc[27m [27m"[27m$[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[27m"[27m [27mc[27mu[27mr[27ml[27m [27m-[27ms[27mS[27mf[27m [27mh[27mt[27mt[27mp[27m:[27m/[27m/[27ml[27mo[27mc[27ma[27ml[27mh[27mo[27ms[27mt[27m:[27m8[27m5[27m2[27m9[27m/[27m_[27ma[27mp[27mi[27m/[27mv[27me[27mr[27msi[27mo[27mn[?1l>[?2004l
]2;docker exec "$ARANGO_CONTAINER" curl -sSf http://localhost:8529/_api/version]1;dockerOCI runtime exec failed: exec failed: unable to start container process: exec: "curl": executable file not found in $PATH: unknown
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004heecho $[7mARANGO_CONTAINER[27m[16D[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[?1l>[?2004l
]2;echo $ARANGO_CONTAINER]1;echoarangodb
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004h[7muntil docker exec "$ARANGO_CONTAINER" arangosh --server.endpoint tcp://12[7m7[7m.0.0.1:8529 --server.database _system --server.username root --server.password "$ARANGO_RO[7mO[7mT_PASSWORD" --javascript.execute "require('@arangodb').db._version();" > /dev/null 2>&1; d[7mo[27m[K
[7m# ...[27m[K[4A[13C[27mu[27mn[27mt[27mi[27ml[27m [27md[27mo[27mc[27mk[27me[27mr[27m [27me[27mx[27me[27mc[27m [27m"[27m$[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[27m"[27m [27ma[27mr[27ma[27mn[27mg[27mo[27ms[27mh[27m [27m-[27m-[27ms[27me[27mr[27mv[27me[27mr[27m.[27me[27mn[27md[27mp[27mo[27mi[27mn[27mt[27m [27mt[27mc[27mp[27m:[27m/[27m/[27m1[27m27[27m.[27m0[27m.[27m0[27m.[27m1[27m:[27m8[27m5[27m2[27m9[27m [27m-[27m-[27ms[27me[27mr[27mv[27me[27mr[27m.[27md[27ma[27mt[27ma[27mb[27ma[27ms[27me[27m [27m_[27ms[27my[27ms[27mt[27me[27mm[27m [27m-[27m-[27ms[27me[27mr[27mv[27me[27mr[27m.[27mu[27ms[27me[27mr[27mn[27ma[27mm[27me[27m [27mr[27mo[27mo[27mt[27m [27m-[27m-[27ms[27me[27mr[27mv[27me[27mr[27m.[27mp[27ma[27ms[27ms[27mw[27mo[27mr[27md[27m [27m"[27m$[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mR[27mOO[27mT[27m_[27mP[27mA[27mS[27mS[27mW[27mO[27mR[27mD[27m"[27m [27m-[27m-[27mj[27ma[27mv[27ma[27ms[27mc[27mr[27mi[27mp[27mt[27m.[27me[27mx[27me[27mc[27mu[27mt[27me[27m [27m"[27mr[27me[27mq[27mu[27mi[27mr[27me[27m([27m'[27m@[27ma[27mr[27ma[27mn[27mg[27mo[27md[27mb[27m'[27m)[27m.[27md[27mb[27m.[27m_[27mv[27me[27mr[27ms[27mi[27mo[27mn[27m([27m)[27m;[27m"[27m [27m>[27m [27m/[27md[27me[27mv[27m/[27mn[27mu[27ml[27ml[27m [27m2[27m>[27m&[27m1[27m;[27m [27mdo[1B[27m#[27m [27m.[27m.[27m.[?1l>[?2004l
[0m[27m[24m[Juntil> [K[?1h=[?2004h[?2004l
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h
bck-i-search: _[K[A[3Cuntil docker exec "$ARANGO_CONTAINER" arangosh --server.endpoint tcp://127.0.0.1:8529 --server.database _system --server.username root --server.password "$ARANGO_ROOT_PASSWORD" --javascript.execute "require('@arangodb').db._version();" > /dev/null 2>&1; [4md[24mo[K
# ...[K
bck-i-search: d_[K[3A[74C[4md[4mo[24m[2B[14Co_[3A[73C[A[A[66D[4md[4mo[4mc[24m[2B[63C[24mdo[2B[15Cc_[5A[6C[2C[4mc[4mk[24m[5B[11Dk_[5A[5C[3C[4mk[4me[24m[5B[11De_[5A[4C[4C[4me[4mr[24m[5B[11Dr_[5A[3C[6P[32Ccurl -sSf http://localhost:8529/_api/version[K[1Bbck-i-search: docker_[K[1B[K[1B[K[1B[K[5A[18C[7Cnetwork ls[K[1B[M[A[18C[24md[24mo[24mc[24mk[24me[24mr[1B[K[A[18C[?1l>[?2004l[1B]2;docker network ls]1;dockerNETWORK ID     NAME                      DRIVER    SCOPE
1ee1d167acfd   app-net                   bridge    local
93978ba9dcf5   bridge                    bridge    local
e1a3d61dd376   host                      host      local
914fe4340b62   none                      null      local
0eafcfec3f90   research-kg-app_default   bridge    local
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004h
bck-i-search: _[K[A[3C[4md[24mocker network ls[1B[21Dd_[A[2C[4md[4mo[24m[1Bo_[A[1C[4md[4mo[4mc[24m[1Bc_[A[24md[24mo[24mc[1B[K[A[35C         conn tainers ls[?1l>[?2004l[1B]2;docker containers ls]1;dockerdocker: unknown command: docker containers

Run 'docker --help' for more information
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004hdocker containers ls    ls[?1l>[?2004l
]2;docker container ls]1;dockerCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hdocker container lss ls[13Dnetwork l[2C  [17Duntil docker exec "$ARANGO_CONTAINER" arangosh --server.endpoint tcp://127.0.0.1:8529 --server.database _system --server.username root --server.password "$ARANGO_ROOT_PASSWORD" --javascript.execute "require('@arangodb').db._version();" > /dev/null 2>&1; do[K
# ...[K[A[3A[17Cecho [14P[17C[K[1B[K[1B[K[1B[K[1B[K[4A[40C[22Ddocker exec "$ARANGO_CONTAINER" curl -sSf http://localhost:8529/_api/version[K[A[15C[14P[16C="arangodb"[K[1B[K[A[45C[27D./local_arango_setup.sh    [?1l>[?2004l[1B]2;./local_arango_setup.sh]1;./local_arango_setup.shDocker network app-net already exists
Starting ArangoDB container...
docker: Error response from daemon: Conflict. The container name "/arangodb" is already in use by container "4846171d5f77fe42a799025c1dbfa6ab08fef108b3fc609948d578a2c69c5e08". You have to remove (or rename) that container to be able to reuse that name.

Run 'docker run --help' for more information
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h
bck-i-search: _[K[A[3C./local_a[4mr[24mango_setup.sh[1B[27Dr_[A[11C[9Ddocker ne[24mtwork [4mr[4mm[24m app-net[1B[28Dm_[A[16C[24mr[24mm[1B[K[A[33C[?1l>[?2004l[1B]2;docker network rm app-net]1;dockerapp-net
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hdocker network rm app-net[25D./local_arango_setup.sh  [?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shCreating Docker network: app-net
72530117f0c299fcca7d4c9c9eefcf1cf83d71f135eeea44a0614e8855207e26
Starting ArangoDB container...
40f9d2528cd15b0c13c1523a3d3a13c8c6ea1129ce3c57febcf802747ab6b07e
Waiting for ArangoDB to be ready...
^C
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h./local_arango_setup.sh[?1l>[?2004l
]2;./local_arango_setup.sh]1;./local_arango_setup.shDocker network app-net already exists
Starting ArangoDB container...
Unable to find image 'arangodb/arangodb:latest' locally
latest: Pulling from arangodb/arangodb

[1A[2Kf18232174bc9: Pulling fs layer [1B
[1A[2Kcc10dc04025d: Pulling fs layer [1B
[1A[2K642ae810f380: Pulling fs layer [1B
[1A[2K1134a0061aa0: Pulling fs layer [1B
[1A[2K56b7774880c2: Pulling fs layer [1B
[1A[2K74af195bfef7: Pulling fs layer [1B
[1A[2K7a827e25522d: Pulling fs layer [1B
[1A[2K791e368dbf9d: Pulling fs layer [1B
[1A[2K1c35adbe585b: Pulling fs layer [1B[4A[2K74af195bfef7: Waiting [4B[1A[2K1c35adbe585b: Waiting [1B[6A[2K1134a0061aa0: Waiting [6B[3A[2K7a827e25522d: Waiting [3B[2A[2K791e368dbf9d: Waiting [2B[5A[2K56b7774880c2: Waiting [5B[9A[2Kf18232174bc9: Downloading  36.91kB/3.642MB[9B[8A[2Kcc10dc04025d: Downloading     933B/84.15kB[8B[8A[2Kcc10dc04025d: Downloading  84.15kB/84.15kB[8B[8A[2Kcc10dc04025d: Verifying Checksum [8B[8A[2Kcc10dc04025d: Download complete [8B[7A[2K642ae810f380: Downloading  534.1kB/218.3MB[7B[9A[2Kf18232174bc9: Downloading  617.9kB/3.642MB[9B[9A[2Kf18232174bc9: Downloading  1.011MB/3.642MB[9B[7A[2K642ae810f380: Downloading  1.075MB/218.3MB[7B[9A[2Kf18232174bc9: Downloading   2.41MB/3.642MB[9B[7A[2K642ae810f380: Downloading  2.667MB/218.3MB[7B[9A[2Kf18232174bc9: Verifying Checksum [9B[9A[2Kf18232174bc9: Download complete [9B[9A[2Kf18232174bc9: Extracting  65.54kB/3.642MB[9B[7A[2K642ae810f380: Downloading  4.822MB/218.3MB[7B[9A[2Kf18232174bc9: Extracting  1.376MB/3.642MB[9B[9A[2Kf18232174bc9: Extracting  3.642MB/3.642MB[9B[9A[2Kf18232174bc9: Extracting  3.642MB/3.642MB[9B[7A[2K642ae810f380: Downloading  9.615MB/218.3MB[7B[9A[2Kf18232174bc9: Pull complete [9B[8A[2Kcc10dc04025d: Extracting  32.77kB/84.15kB[8B[8A[2Kcc10dc04025d: Extracting  84.15kB/84.15kB[8B[8A[2Kcc10dc04025d: Extracting  84.15kB/84.15kB[8B[8A[2Kcc10dc04025d: Pull complete [8B[7A[2K642ae810f380: Downloading  13.92MB/218.3MB[7B[6A[2K1134a0061aa0: Downloading     518B/518B[6B[6A[2K1134a0061aa0: Verifying Checksum [6B[6A[2K1134a0061aa0: Download complete [6B[7A[2K642ae810f380: Downloading  17.14MB/218.3MB[7B[7A[2K642ae810f380: Downloading  21.42MB/218.3MB[7B[5A[2K56b7774880c2: Downloading     934B/1.068kB[5B[5A[2K56b7774880c2: Downloading  1.068kB/1.068kB[5B[5A[2K56b7774880c2: Download complete [5B[7A[2K642ae810f380: Downloading  25.68MB/218.3MB[7B[7A[2K642ae810f380: Downloading  29.43MB/218.3MB[7B[7A[2K642ae810f380: Downloading  34.26MB/218.3MB[7B[7A[2K642ae810f380: Downloading  38.53MB/218.3MB[7B[4A[2K74af195bfef7: Downloading     148B/148B[4B[4A[2K74af195bfef7: Verifying Checksum [4B[4A[2K74af195bfef7: Download complete [4B[7A[2K642ae810f380: Downloading  43.89MB/218.3MB[7B[7A[2K642ae810f380: Downloading  47.11MB/218.3MB[7B[7A[2K642ae810f380: Downloading   51.9MB/218.3MB[7B[3A[2K7a827e25522d: Downloading     179B/179B[3B[3A[2K7a827e25522d: Verifying Checksum [3B[3A[2K7a827e25522d: Download complete [3B[7A[2K642ae810f380: Downloading  56.71MB/218.3MB[7B[7A[2K642ae810f380: Downloading  59.38MB/218.3MB[7B[7A[2K642ae810f380: Downloading  64.16MB/218.3MB[7B[7A[2K642ae810f380: Downloading  67.37MB/218.3MB[7B[7A[2K642ae810f380: Downloading  71.14MB/218.3MB[7B[7A[2K642ae810f380: Downloading  75.96MB/218.3MB[7B[2A[2K791e368dbf9d: Downloading     934B/2.014kB[2B[2A[2K791e368dbf9d: Downloading  2.014kB/2.014kB[2B[2A[2K791e368dbf9d: Verifying Checksum [2B[2A[2K791e368dbf9d: Download complete [2B[7A[2K642ae810f380: Downloading  80.76MB/218.3MB[7B[7A[2K642ae810f380: Downloading  85.03MB/218.3MB[7B[7A[2K642ae810f380: Downloading  89.85MB/218.3MB[7B[1A[2K1c35adbe585b: Downloading     934B/2.064kB[1B[1A[2K1c35adbe585b: Downloading  2.064kB/2.064kB[1B[1A[2K1c35adbe585b: Verifying Checksum [1B[1A[2K1c35adbe585b: Download complete [1B[7A[2K642ae810f380: Downloading  94.64MB/218.3MB[7B[7A[2K642ae810f380: Downloading  97.85MB/218.3MB[7B[7A[2K642ae810f380: Downloading  102.6MB/218.3MB[7B[7A[2K642ae810f380: Downloading  106.4MB/218.3MB[7B[7A[2K642ae810f380: Downloading  110.7MB/218.3MB[7B[7A[2K642ae810f380: Downloading    116MB/218.3MB[7B[7A[2K642ae810f380: Downloading  119.8MB/218.3MB[7B[7A[2K642ae810f380: Downloading  122.4MB/218.3MB[7B[7A[2K642ae810f380: Downloading  125.1MB/218.3MB[7B[7A[2K642ae810f380: Downloading  129.4MB/218.3MB[7B[7A[2K642ae810f380: Downloading  134.8MB/218.3MB[7B[7A[2K642ae810f380: Downloading  139.1MB/218.3MB[7B[7A[2K642ae810f380: Downloading  143.3MB/218.3MB[7B[7A[2K642ae810f380: Downloading  147.1MB/218.3MB[7B[7A[2K642ae810f380: Downloading  151.4MB/218.3MB[7B[7A[2K642ae810f380: Downloading  156.7MB/218.3MB[7B[7A[2K642ae810f380: Downloading  160.5MB/218.3MB[7B[7A[2K642ae810f380: Downloading  165.8MB/218.3MB[7B[7A[2K642ae810f380: Downloading  171.1MB/218.3MB[7B[7A[2K642ae810f380: Downloading  176.5MB/218.3MB[7B[7A[2K642ae810f380: Downloading  178.1MB/218.3MB[7B[7A[2K642ae810f380: Downloading  180.8MB/218.3MB[7B[7A[2K642ae810f380: Downloading  185.5MB/218.3MB[7B[7A[2K642ae810f380: Downloading  189.8MB/218.3MB[7B[7A[2K642ae810f380: Downloading  195.7MB/218.3MB[7B[7A[2K642ae810f380: Downloading    200MB/218.3MB[7B[7A[2K642ae810f380: Downloading  206.4MB/218.3MB[7B[7A[2K642ae810f380: Downloading  211.7MB/218.3MB[7B[7A[2K642ae810f380: Downloading  217.1MB/218.3MB[7B[7A[2K642ae810f380: Verifying Checksum [7B[7A[2K642ae810f380: Download complete [7B[7A[2K642ae810f380: Extracting  557.1kB/218.3MB[7B[7A[2K642ae810f380: Extracting  5.571MB/218.3MB[7B[7A[2K642ae810f380: Extracting  11.14MB/218.3MB[7B[7A[2K642ae810f380: Extracting  17.83MB/218.3MB[7B[7A[2K642ae810f380: Extracting  21.73MB/218.3MB[7B[7A[2K642ae810f380: Extracting  26.18MB/218.3MB[7B[7A[2K642ae810f380: Extracting   31.2MB/218.3MB[7B[7A[2K642ae810f380: Extracting  36.77MB/218.3MB[7B[7A[2K642ae810f380: Extracting  41.22MB/218.3MB[7B[7A[2K642ae810f380: Extracting  45.12MB/218.3MB[7B[7A[2K642ae810f380: Extracting  50.14MB/218.3MB[7B[7A[2K642ae810f380: Extracting  55.15MB/218.3MB[7B[7A[2K642ae810f380: Extracting   59.6MB/218.3MB[7B[7A[2K642ae810f380: Extracting  64.62MB/218.3MB[7B[7A[2K642ae810f380: Extracting  69.63MB/218.3MB[7B[7A[2K642ae810f380: Extracting  74.09MB/218.3MB[7B[7A[2K642ae810f380: Extracting  78.54MB/218.3MB[7B[7A[2K642ae810f380: Extracting  81.33MB/218.3MB[7B[7A[2K642ae810f380: Extracting  83.56MB/218.3MB[7B[7A[2K642ae810f380: Extracting   86.9MB/218.3MB[7B[7A[2K642ae810f380: Extracting  91.91MB/218.3MB[7B[7A[2K642ae810f380: Extracting  96.93MB/218.3MB[7B[7A[2K642ae810f380: Extracting  101.9MB/218.3MB[7B[7A[2K642ae810f380: Extracting  108.1MB/218.3MB[7B[7A[2K642ae810f380: Extracting  119.8MB/218.3MB[7B[7A[2K642ae810f380: Extracting  131.5MB/218.3MB[7B[7A[2K642ae810f380: Extracting  142.6MB/218.3MB[7B[7A[2K642ae810f380: Extracting  153.2MB/218.3MB[7B[7A[2K642ae810f380: Extracting  164.3MB/218.3MB[7B[7A[2K642ae810f380: Extracting  175.5MB/218.3MB[7B[7A[2K642ae810f380: Extracting  183.3MB/218.3MB[7B[7A[2K642ae810f380: Extracting  184.9MB/218.3MB[7B[7A[2K642ae810f380: Extracting  186.6MB/218.3MB[7B[7A[2K642ae810f380: Extracting  191.6MB/218.3MB[7B[7A[2K642ae810f380: Extracting  196.1MB/218.3MB[7B[7A[2K642ae810f380: Extracting  198.3MB/218.3MB[7B[7A[2K642ae810f380: Extracting  202.8MB/218.3MB[7B[7A[2K642ae810f380: Extracting  205.6MB/218.3MB[7B[7A[2K642ae810f380: Extracting  211.7MB/218.3MB[7B[7A[2K642ae810f380: Extracting  214.5MB/218.3MB[7B[7A[2K642ae810f380: Extracting    215MB/218.3MB[7B[7A[2K642ae810f380: Extracting  215.6MB/218.3MB[7B[7A[2K642ae810f380: Extracting  216.1MB/218.3MB[7B[7A[2K642ae810f380: Extracting  216.7MB/218.3MB[7B[7A[2K642ae810f380: Extracting  218.3MB/218.3MB[7B[7A[2K642ae810f380: Pull complete [7B[6A[2K1134a0061aa0: Extracting     518B/518B[6B[6A[2K1134a0061aa0: Extracting     518B/518B[6B[6A[2K1134a0061aa0: Pull complete [6B[5A[2K56b7774880c2: Extracting  1.068kB/1.068kB[5B[5A[2K56b7774880c2: Extracting  1.068kB/1.068kB[5B[5A[2K56b7774880c2: Pull complete [5B[4A[2K74af195bfef7: Extracting     148B/148B[4B[4A[2K74af195bfef7: Extracting     148B/148B[4B[4A[2K74af195bfef7: Pull complete [4B[3A[2K7a827e25522d: Extracting     179B/179B[3B[3A[2K7a827e25522d: Extracting     179B/179B[3B[3A[2K7a827e25522d: Pull complete [3B[2A[2K791e368dbf9d: Extracting  2.014kB/2.014kB[2B[2A[2K791e368dbf9d: Extracting  2.014kB/2.014kB[2B[2A[2K791e368dbf9d: Pull complete [2B[1A[2K1c35adbe585b: Extracting  2.064kB/2.064kB[1B[1A[2K1c35adbe585b: Extracting  2.064kB/2.064kB[1B[1A[2K1c35adbe585b: Pull complete [1BDigest: sha256:258323b83ed5cd5bacc6e2d7574777db5a8a61ec75f663e4d690824c3301c7c2
Status: Downloaded newer image for arangodb/arangodb:latest
855c7c1c1139c1d758274cd7efb826cc16395b3e0e4893e112dfb1a9ab6c9631
Waiting for ArangoDB to be ready...
^C
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[7mdocker run --rm \[27m
[7m    --network "$NETWORK_NAME" \[27m[K
[7m    -v "$APP_DIR":/app \[27m[K
[7m    -w /app \[27m[K
[7m    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \[27m[K
[7m    -e ARANGODB_USERNAME="root" \[27m[K
[7m    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[27m[K
[7m    -e ARANGODB_DATABASE="_system" \[27m[K
[7m    -it "$TESTER_IMAGE" /bin/bash[27m[K
[K[9A[18C[27md[27mo[27mc[27mk[27me[27mr[27m [27mr[27mu[27mn[27m [27m-[27m-[27mr[27mm[27m [27m\[1B[27m [27m [27m [27m [27m-[27m-[27mn[27me[27mt[27mw[27mo[27mr[27mk[27m [27m"[27m$[27mN[27mE[27mT[27mW[27mO[27mR[27mK[27m_[27mN[27mA[27mM[27mE[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27mv[27m [27m"[27m$[27mA[27mP[27mP[27m_[27mD[27mI[27mR[27m"[27m:[27m/[27ma[27mp[27mp[27m [27m\[1B[27m [27m [27m [27m [27m-[27mw[27m [27m/[27ma[27mp[27mp[27m [27m\[1B[27m [27m [27m [27m [27m-[27me[27m [27mA[27mR[27mA[27mN[27mG[27mO[27mD[27mB[27m_[27mH[27mO[27mS[27mT[27m=[27m"[27mh[27mt[27mt[27mp[27m:[27m/[27m/[27m$[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[27m:[27m8[27m5[27m2[27m9[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27me[27m [27mA[27mR[27mA[27mN[27mG[27mO[27mD[27mB[27m_[27mU[27mS[27mE[27mR[27mN[27mA[27mM[27mE[27m=[27m"[27mr[27mo[27mo[27mt[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27me[27m [27mA[27mR[27mA[27mN[27mG[27mO[27mD[27mB[27m_[27mP[27mA[27mS[27mS[27mW[27mO[27mR[27mD[27m=[27m"[27m$[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mR[27mO[27mO[27mT[27m_[27mP[27mA[27mS[27mS[27mW[27mO[27mR[27mD[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27me[27m [27mA[27mR[27mA[27mN[27mG[27mO[27mD[27mB[27m_[27mD[27mA[27mT[27mA[27mB[27mA[27mS[27mE[27m=[27m"[27m_[27ms[27my[27ms[27mt[27me[27mm[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27mi[27mt[27m [27m"[27m$[27mT[27mE[27mS[27mT[27mE[27mR[27m_[27mI[27mM[27mA[27mG[27mE[27m"[27m [27m/[27mb[27mi[27mn[27m/[27mb[27ma[27ms[27mh[1B[K[?1l>[?2004l
]2;docker run --rm --network "$NETWORK_NAME" -v "$APP_DIR":/app -w /app -e  -e  ]1;dockerdocker: invalid spec: :/app: empty section between colons

Run 'docker run --help' for more information
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h[7mNETWORK_NAME="app-net"[27m
[7mARANGO_CONTAINER="arangodb"[27m[K
[7mARANGO_ROOT_PASSWORD="my-secret-password"[27m[K
[7mTESTER_IMAGE="research-kg-app-embedding-tester:latest"[27m[K
[7mAPP_DIR="$(pwd)"[27m[K[4A[2C[27mN[27mE[27mT[27mW[27mO[27mR[27mK[27m_[27mN[27mA[27mM[27mE[27m=[27m"[27ma[27mp[27mp[27m-[27mn[27me[27mt[27m"[1B[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[27m=[27m"[27ma[27mr[27ma[27mn[27mg[27mo[27md[27mb[27m"[1B[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mR[27mO[27mO[27mT[27m_[27mP[27mA[27mS[27mS[27mW[27mO[27mR[27mD[27m=[27m"[27mm[27my[27m-[27ms[27me[27mc[27mr[27me[27mt[27m-[27mp[27ma[27ms[27ms[27mw[27mo[27mr[27md[27m"[1B[27mT[27mE[27mS[27mT[27mE[27mR[27m_[27mI[27mM[27mA[27mG[27mE[27m=[27m"[27mr[27me[27ms[27me[27ma[27mr[27mc[27mh[27m-[27mk[27mg[27m-[27ma[27mp[27mp[27m-[27me[27mm[27mb[27me[27md[27md[27mi[27mn[27mg[27m-[27mt[27me[27ms[27mt[27me[27mr[27m:[27ml[27ma[27mt[27me[27ms[27mt[27m"[1B[27mA[27mP[27mP[27m_[27mD[27mI[27mR[27m=[27m"[27m$[27m([27mp[27mw[27md[27m)[27m"[?1l>[?2004l
]2;NETWORK_NAME="app-net" ; ARANGO_CONTAINER="arangodb" ; ARANGO_ROOT_PASSWORD= =]1;[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004h[7mdocker run --rm \[27m
[7m    --network "$NETWORK_NAME" \[27m[K
[7m    -v "$APP_DIR":/app \[27m[K
[7m    -w /app \[27m[K
[7m    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \[27m[K
[7m    -e ARANGODB_USERNAME="root" \[27m[K
[7m    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[27m[K
[7m    -e ARANGODB_DATABASE="_system" \[27m[K
[7m    -it "$TESTER_IMAGE" /bin/bash[27m[K
[K[9A[18C[27md[27mo[27mc[27mk[27me[27mr[27m [27mr[27mu[27mn[27m [27m-[27m-[27mr[27mm[27m [27m\[1B[27m [27m [27m [27m [27m-[27m-[27mn[27me[27mt[27mw[27mo[27mr[27mk[27m [27m"[27m$[27mN[27mE[27mT[27mW[27mO[27mR[27mK[27m_[27mN[27mA[27mM[27mE[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27mv[27m [27m"[27m$[27mA[27mP[27mP[27m_[27mD[27mI[27mR[27m"[27m:[27m/[27ma[27mp[27mp[27m [27m\[1B[27m [27m [27m [27m [27m-[27mw[27m [27m/[27ma[27mp[27mp[27m [27m\[1B[27m [27m [27m [27m [27m-[27me[27m [27mA[27mR[27mA[27mN[27mG[27mO[27mD[27mB[27m_[27mH[27mO[27mS[27mT[27m=[27m"[27mh[27mt[27mt[27mp[27m:[27m/[27m/[27m$[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[27m:[27m8[27m5[27m2[27m9[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27me[27m [27mA[27mR[27mA[27mN[27mG[27mO[27mD[27mB[27m_[27mU[27mS[27mE[27mR[27mN[27mA[27mM[27mE[27m=[27m"[27mr[27mo[27mo[27mt[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27me[27m [27mA[27mR[27mA[27mN[27mG[27mO[27mD[27mB[27m_[27mP[27mA[27mS[27mS[27mW[27mO[27mR[27mD[27m=[27m"[27m$[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mR[27mO[27mO[27mT[27m_[27mP[27mA[27mS[27mS[27mW[27mO[27mR[27mD[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27me[27m [27mA[27mR[27mA[27mN[27mG[27mO[27mD[27mB[27m_[27mD[27mA[27mT[27mA[27mB[27mA[27mS[27mE[27m=[27m"[27m_[27ms[27my[27ms[27mt[27me[27mm[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27mi[27mt[27m [27m"[27m$[27mT[27mE[27mS[27mT[27mE[27mR[27m_[27mI[27mM[27mA[27mG[27mE[27m"[27m [27m/[27mb[27mi[27mn[27m/[27mb[27ma[27ms[27mh[1B[K[?1l>[?2004l
]2;docker run --rm --network "$NETWORK_NAME" -v "$APP_DIR":/app -w /app -e  -e  ]1;docker[?2004hroot@bae08fd35db2:/app# ls
[?2004l__pycache__  local_arango_setup.sh   test.sh
build.sh     local_arango_setup.sh~  test_embedding.py
deploy.sh    terraform-apply.sh      test_embedding.py~
[?2004hroot@bae08fd35db2:/app# local[K[K[K[K[K[?2004l
exit
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hppwd[?1l>[?2004l
]2;pwd]1;pwd/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;32mâžœ  [36mscripts[00m [K[?1h=[?2004hppw[?1l>[?2004l
]2;pw]1;pwzsh: command not found: pw
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts]2;shrisha@Shrishas-MacBook-Pro]1;..g-app/scripts]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app/scripts[0m[27m[24m[J(base) [01;31mâžœ  [36mscripts[00m [K[?1h=[?2004h....  ...[?1l>[?2004l
]2;..]1;..[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hlls[?1l>[?2004l
]2;ls -G]1;lsDockerfile               [1m[36mdocker[39;49m[0m                   requirements.txt
Dockerfile.notebook      docker-compose.yml       requirements.txt~
Dockerfile.notebook~     docker-compose.yml~      [1m[36mscripts[39;49m[0m
Dockerfile.test          [1m[36mdocs[39;49m[0m                     [1m[36msrc[39;49m[0m
Dockerfile.test~         [1m[36minfrastructure[39;49m[0m           terraform.tfvars.example
Dockerfile~              [1m[36mnotebooks[39;49m[0m                [1m[36mtest_samples[39;49m[0m
README.md                requirements-dev.txt     [1m[36mtests[39;49m[0m
README.md~               requirements-dev.txt~    typescript
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004h[7mNETWORK_NAME="app-net"[27m
[7mARANGO_CONTAINER="arangodb"[27m[K
[7mARANGO_ROOT_PASSWORD="my-secret-password"[27m[K
[7mTESTER_IMAGE="research-kg-app-embedding-tester:latest"[27m[K
[7mAPP_DIR="$(pwd)"[27m[K[4A[10C[27mN[27mE[27mT[27mW[27mO[27mR[27mK[27m_[27mN[27mA[27mM[27mE[27m=[27m"[27ma[27mp[27mp[27m-[27mn[27me[27mt[27m"[1B[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mC[27mO[27mN[27mT[27mA[27mI[27mN[27mE[27mR[27m=[27m"[27ma[27mr[27ma[27mn[27mg[27mo[27md[27mb[27m"[1B[27mA[27mR[27mA[27mN[27mG[27mO[27m_[27mR[27mO[27mO[27mT[27m_[27mP[27mA[27mS[27mS[27mW[27mO[27mR[27mD[27m=[27m"[27mm[27my[27m-[27ms[27me[27mc[27mr[27me[27mt[27m-[27mp[27ma[27ms[27ms[27mw[27mo[27mr[27md[27m"[1B[27mT[27mE[27mS[27mT[27mE[27mR[27m_[27mI[27mM[27mA[27mG[27mE[27m=[27m"[27mr[27me[27ms[27me[27ma[27mr[27mc[27mh[27m-[27mk[27mg[27m-[27ma[27mp[27mp[27m-[27me[27mm[27mb[27me[27md[27md[27mi[27mn[27mg[27m-[27mt[27me[27ms[27mt[27me[27mr[27m:[27ml[27ma[27mt[27me[27ms[27mt[27m"[1B[27mA[27mP[27mP[27m_[27mD[27mI[27mR[27m=[27m"[27m$[27m([27mp[27mw[27md[27m)[27m"[?1l>[?2004l
]2;NETWORK_NAME="app-net" ; ARANGO_CONTAINER="arangodb" ; ARANGO_ROOT_PASSWORD= =]1;[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hNETWORK_NAME="app-net"
ARANGO_CONTAINER="arangodb"[K
ARANGO_ROOT_PASSWORD="my-secret-password"[K
TESTER_IMAGE="research-kg-app-embedding-tester:latest"[K
APP_DIR="$(pwd)"[K[4A[32C[22Dls                    [1B[K[1B[K[1B[K[1B[K[4A[28CNETWORK_NAME="app-net"[1BARANGO_CONTAINER="arangodb"[K[1BARANGO_ROOT_PASSWORD="my-secret-password"[K[1BTESTER_IMAGE="research-kg-app-embedding-tester:latest"[K[1BAPP_DIR="$(pwd)"[K[4A[32C[22Dls                    [1B[K[1B[K[1B[K[1B[K[4A[28C..pwddocker run --rm \[1B    --network "$NETWORK_NAME" \[K[1B    -v "$APP_DIR":/app \[K[1B    -w /app \[K[1B    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \[K
    -e ARANGODB_USERNAME="root" \[K
    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[K
    -e ARANGODB_DATABASE="_system" \[K
    -it "$TESTER_IMAGE" /bin/bash[K
[K[9A[43C[9B[K[9A[43C[?1l>[?2004l[9B
]2;docker run --rm --network "$NETWORK_NAME" -v "$APP_DIR":/app -w /app -e  -e  ]1;docker[?2004hroot@5895a5096391:/app# ls
[?2004lDockerfile	      README.md		   infrastructure	  scripts
Dockerfile.notebook   README.md~	   notebooks		  src
Dockerfile.notebook~  docker		   requirements-dev.txt   terraform.tfvars.example
Dockerfile.test       docker-compose.yml   requirements-dev.txt~  test_samples
Dockerfile.test~      docker-compose.yml~  requirements.txt	  tests
Dockerfile~	      docs		   requirements.txt~	  typescript
[?2004hroot@5895a5096391:/app# aran[K[K[K[K[7mcurl -sSf \[27m
[7m    --user "$ARANGODB_USERNAME":"$ARANGODB_PASSWORD" \[27m
[7m    "$ARANGODB_HOST"/_api/version[27m[A[Acurl -sSf \
    --user "$ARANGODB_USERNAME":"$ARANGODB_PASSWORD" \
    "$ARANGODB_HOST"/_api/version
[?2004lbash: curl: command not found
[?2004hroot@5895a5096391:/app# [7marangosh[27marangosh
[?2004lbash: arangosh: command not found
[?2004hroot@5895a5096391:/app# ls
[?2004lDockerfile	      README.md		   infrastructure	  scripts
Dockerfile.notebook   README.md~	   notebooks		  src
Dockerfile.notebook~  docker		   requirements-dev.txt   terraform.tfvars.example
Dockerfile.test       docker-compose.yml   requirements-dev.txt~  test_samples
Dockerfile.test~      docker-compose.yml~  requirements.txt	  tests
Dockerfile~	      docs		   requirements.txt~	  typescript
[?2004hroot@5895a5096391:/app# python -m src/.[K[K.sc[K[K[K/.s[K[Kscripts/init_graph_db.py[C[K[K[K[1Pinit_graph_db.init_graph_db[1Pscripts.init_graph_db.scripts.init_graph_db
[?2004lTraceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 15, in <module>
    from src.services.graph_db import get_graph_db_service
  File "/app/src/services/graph_db/__init__.py", line 3, in <module>
    from src.config import settings
  File "/app/src/config.py", line 87, in <module>
    settings = Settings()
  File "/usr/local/lib/python3.9/site-packages/pydantic_settings/main.py", line 188, in __init__
    super().__init__(
  File "/usr/local/lib/python3.9/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for Settings
arangodb_user
  Extra inputs are not permitted [type=extra_forbidden, input_value='root', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
arangodb_db
  Extra inputs are not permitted [type=extra_forbidden, input_value='test_graph_db', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
[?2004hroot@5895a5096391:/app# python -m src.scripts.init_graph_db
[?2004l2025-09-24 15:04:29,758 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:04:29,759 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:04:29,759 - INFO - âœ… Successfully connected to ArangoDB
2025-09-24 15:04:29,759 - INFO - Disconnected from ArangoDB
2025-09-24 15:04:29,759 - INFO - Starting graph database initialization...
2025-09-24 15:04:29,759 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:04:29,765 - INFO - Created node collection: nodes_paper
2025-09-24 15:04:29,769 - INFO - Created node collection: nodes_person
2025-09-24 15:04:29,772 - INFO - Created node collection: nodes_organization
2025-09-24 15:04:29,775 - INFO - Created node collection: nodes_location
2025-09-24 15:04:29,778 - INFO - Created node collection: nodes_concept
2025-09-24 15:04:29,781 - INFO - Created node collection: nodes_methodology
2025-09-24 15:04:29,784 - INFO - Created edge collection: edges_cites - CITATION relationships between papers
2025-09-24 15:04:29,787 - INFO - Created edge collection: edges_authored_by - AUTHOR relationships between papers and people
2025-09-24 15:04:29,791 - INFO - Created edge collection: edges_contains - CONTAINS relationships between papers and entities
2025-09-24 15:04:29,794 - INFO - Created edge collection: edges_related_to - GENERIC relationships between entities
2025-09-24 15:04:29,800 - INFO - Created edge collection: edges_belongs_to - MEMBERSHIP relationships (e.g., person to organization)
2025-09-24 15:04:29,804 - INFO - Created edge collection: edges_located_at - LOCATION relationships
2025-09-24 15:04:29,808 - INFO - Created edge collection: edges_uses - USAGE relationships (e.g., paper uses methodology)
2025-09-24 15:04:29,827 - INFO - Created knowledge graph: knowledge_graph
/app/src/scripts/init_graph_db.py:228: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:04:29,833 - INFO - Created index on nodes_organization for fields: ['label']
2025-09-24 15:04:29,838 - INFO - Created index on nodes_organization for fields: ['type']
2025-09-24 15:04:29,842 - INFO - Created index on nodes_organization for fields: ['created_at']
2025-09-24 15:04:29,844 - INFO - Created index on nodes_organization for fields: ['owner_id']
2025-09-24 15:04:29,847 - INFO - Created index on nodes_paper for fields: ['label']
2025-09-24 15:04:29,849 - INFO - Created index on nodes_paper for fields: ['type']
2025-09-24 15:04:29,852 - INFO - Created index on nodes_paper for fields: ['created_at']
2025-09-24 15:04:29,854 - INFO - Created index on nodes_paper for fields: ['owner_id']
2025-09-24 15:04:29,857 - INFO - Created index on nodes_person for fields: ['label']
2025-09-24 15:04:29,859 - INFO - Created index on nodes_person for fields: ['type']
2025-09-24 15:04:29,861 - INFO - Created index on nodes_person for fields: ['created_at']
2025-09-24 15:04:29,863 - INFO - Created index on nodes_person for fields: ['owner_id']
2025-09-24 15:04:29,866 - INFO - Created index on nodes_concept for fields: ['label']
2025-09-24 15:04:29,868 - INFO - Created index on nodes_concept for fields: ['type']
2025-09-24 15:04:29,873 - INFO - Created index on nodes_concept for fields: ['created_at']
2025-09-24 15:04:29,875 - INFO - Created index on nodes_concept for fields: ['owner_id']
2025-09-24 15:04:29,878 - INFO - Created index on nodes_methodology for fields: ['label']
2025-09-24 15:04:29,880 - INFO - Created index on nodes_methodology for fields: ['type']
2025-09-24 15:04:29,882 - INFO - Created index on nodes_methodology for fields: ['created_at']
2025-09-24 15:04:29,884 - INFO - Created index on nodes_methodology for fields: ['owner_id']
2025-09-24 15:04:29,886 - INFO - Created index on nodes_location for fields: ['label']
2025-09-24 15:04:29,888 - INFO - Created index on nodes_location for fields: ['type']
2025-09-24 15:04:29,891 - INFO - Created index on nodes_location for fields: ['created_at']
2025-09-24 15:04:29,893 - INFO - Created index on nodes_location for fields: ['owner_id']
/app/src/scripts/init_graph_db.py:248: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:04:29,896 - INFO - Created index on edges_belongs_to for fields: ['label']
2025-09-24 15:04:29,899 - INFO - Created index on edges_belongs_to for fields: ['type']
2025-09-24 15:04:29,901 - INFO - Created index on edges_belongs_to for fields: ['created_at']
2025-09-24 15:04:29,903 - INFO - Created index on edges_belongs_to for fields: ['owner_id']
2025-09-24 15:04:29,905 - INFO - Created index on edges_uses for fields: ['label']
2025-09-24 15:04:29,908 - INFO - Created index on edges_uses for fields: ['type']
2025-09-24 15:04:29,911 - INFO - Created index on edges_uses for fields: ['created_at']
2025-09-24 15:04:29,915 - INFO - Created index on edges_uses for fields: ['owner_id']
2025-09-24 15:04:29,917 - INFO - Created index on edges_authored_by for fields: ['label']
2025-09-24 15:04:29,920 - INFO - Created index on edges_authored_by for fields: ['type']
2025-09-24 15:04:29,922 - INFO - Created index on edges_authored_by for fields: ['created_at']
2025-09-24 15:04:29,925 - INFO - Created index on edges_authored_by for fields: ['owner_id']
2025-09-24 15:04:29,927 - INFO - Created index on edges_cites for fields: ['label']
2025-09-24 15:04:29,929 - INFO - Created index on edges_cites for fields: ['type']
2025-09-24 15:04:29,931 - INFO - Created index on edges_cites for fields: ['created_at']
2025-09-24 15:04:29,934 - INFO - Created index on edges_cites for fields: ['owner_id']
2025-09-24 15:04:29,936 - INFO - Created index on edges_related_to for fields: ['label']
2025-09-24 15:04:29,938 - INFO - Created index on edges_related_to for fields: ['type']
2025-09-24 15:04:29,940 - INFO - Created index on edges_related_to for fields: ['created_at']
2025-09-24 15:04:29,943 - INFO - Created index on edges_related_to for fields: ['owner_id']
2025-09-24 15:04:29,945 - INFO - Created index on edges_contains for fields: ['label']
2025-09-24 15:04:29,948 - INFO - Created index on edges_contains for fields: ['type']
2025-09-24 15:04:29,950 - INFO - Created index on edges_contains for fields: ['created_at']
2025-09-24 15:04:29,952 - INFO - Created index on edges_contains for fields: ['owner_id']
2025-09-24 15:04:29,954 - INFO - Created index on edges_located_at for fields: ['label']
2025-09-24 15:04:29,957 - INFO - Created index on edges_located_at for fields: ['type']
2025-09-24 15:04:29,959 - INFO - Created index on edges_located_at for fields: ['created_at']
2025-09-24 15:04:29,961 - INFO - Created index on edges_located_at for fields: ['owner_id']
2025-09-24 15:04:29,961 - INFO - Graph database initialization completed successfully
2025-09-24 15:04:29,961 - INFO - Disconnected from ArangoDB
2025-09-24 15:04:29,961 - INFO - ðŸŽ‰ Graph database initialization completed successfully!
[?2004hroot@5895a5096391:/app# python -m src.scripts.init_graph_db
[?2004lTraceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 647, in run_until_complete
    return future.result()
  File "/app/src/scripts/init_graph_db.py", line 278, in main
    initializer = GraphDBInitializer()
  File "/app/src/scripts/init_graph_db.py", line 27, in __init__
    self.graph_db = get_graph_db_service()
  File "/app/src/services/graph_db/__init__.py", line 11, in get_graph_db_service
    return ArangoDBService()
TypeError: Can't instantiate abstract class ArangoDBService with abstract method disconnect
[?2004hroot@5895a5096391:/app# python -m src.scripts.init_graph_db
[?2004lTraceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 647, in run_until_complete
    return future.result()
  File "/app/src/scripts/init_graph_db.py", line 278, in main
    initializer = GraphDBInitializer()
  File "/app/src/scripts/init_graph_db.py", line 27, in __init__
    self.graph_db = get_graph_db_service()
  File "/app/src/services/graph_db/__init__.py", line 11, in get_graph_db_service
    return ArangoDBService()
TypeError: Can't instantiate abstract class ArangoDBService with abstract method disconnect
[?2004hroot@5895a5096391:/app# [?2004l
exit
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;31mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hdocker run --rm \
    --network "$NETWORK_NAME" \[K
    -v "$APP_DIR":/app \[K
    -w /app \[K
    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \[K
    -e ARANGODB_USERNAME="root" \[K
    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[K
    -e ARANGODB_DATABASE="_system" \[K
    -it "$TESTER_IMAGE" /bin/bash[K
[K[9A[43C[9B[K[9A[43C[?1l>[?2004l[9B
]2;docker run --rm --network "$NETWORK_NAME" -v "$APP_DIR":/app -w /app -e  -e  ]1;docker[?2004hroot@0190a62b9189:/app# python -m src.se[Kc[K[K[K/scripts/init_graph_db.py[K[K[K[1Pinit_graph_db.init_graph_db[1Pscripts.init_graph_db.scripts.init_graph_db
[?2004lTraceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 647, in run_until_complete
    return future.result()
  File "/app/src/scripts/init_graph_db.py", line 278, in main
    initializer = GraphDBInitializer()
  File "/app/src/scripts/init_graph_db.py", line 27, in __init__
    self.graph_db = get_graph_db_service()
  File "/app/src/services/graph_db/__init__.py", line 11, in get_graph_db_service
    return ArangoDBService()
TypeError: Can't instantiate abstract class ArangoDBService with abstract method disconnect
[?2004hroot@0190a62b9189:/app# python -m src.scripts.init_graph_db
[?2004lTraceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 647, in run_until_complete
    return future.result()
  File "/app/src/scripts/init_graph_db.py", line 278, in main
    initializer = GraphDBInitializer()
  File "/app/src/scripts/init_graph_db.py", line 27, in __init__
    self.graph_db = get_graph_db_service()
  File "/app/src/services/graph_db/__init__.py", line 11, in get_graph_db_service
    return ArangoDBService()
TypeError: Can't instantiate abstract class ArangoDBService with abstract method disconnect
[?2004hroot@0190a62b9189:/app# 
[?2004l[?2004hroot@0190a62b9189:/app# python -m src.scripts.init_graph_db
[?2004lTraceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 647, in run_until_complete
    return future.result()
  File "/app/src/scripts/init_graph_db.py", line 278, in main
    initializer = GraphDBInitializer()
  File "/app/src/scripts/init_graph_db.py", line 27, in __init__
    self.graph_db = get_graph_db_service()
  File "/app/src/services/graph_db/__init__.py", line 11, in get_graph_db_service
    return ArangoDBService()
TypeError: Can't instantiate abstract class ArangoDBService with abstract method disconnect
[?2004hroot@0190a62b9189:/app# python -m src.scripts.init_graph_db
[?2004lTraceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 647, in run_until_complete
    return future.result()
  File "/app/src/scripts/init_graph_db.py", line 278, in main
    initializer = GraphDBInitializer()
  File "/app/src/scripts/init_graph_db.py", line 27, in __init__
    self.graph_db = get_graph_db_service()
  File "/app/src/services/graph_db/__init__.py", line 11, in get_graph_db_service
    return ArangoDBService()
TypeError: Can't instantiate abstract class ArangoDBService with abstract method disconnect
[?2004hroot@0190a62b9189:/app# python -m src.scripts.init_graph_db
[?2004lTraceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 647, in run_until_complete
    return future.result()
  File "/app/src/scripts/init_graph_db.py", line 278, in main
    initializer = GraphDBInitializer()
  File "/app/src/scripts/init_graph_db.py", line 27, in __init__
    self.graph_db = get_graph_db_service()
  File "/app/src/services/graph_db/__init__.py", line 11, in get_graph_db_service
    return ArangoDBService()
TypeError: Can't instantiate abstract class ArangoDBService with abstract method disconnect
[?2004hroot@0190a62b9189:/app# python -m src.scripts.init_graph_db
[?2004lTraceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 647, in run_until_complete
    return future.result()
  File "/app/src/scripts/init_graph_db.py", line 278, in main
    initializer = GraphDBInitializer()
  File "/app/src/scripts/init_graph_db.py", line 27, in __init__
    self.graph_db = get_graph_db_service()
  File "/app/src/services/graph_db/__init__.py", line 11, in get_graph_db_service
    return ArangoDBService()
TypeError: Can't instantiate abstract class ArangoDBService with abstract method disconnect
[?2004hroot@0190a62b9189:/app# python -m src.scripts.init_graph_db
[?2004lhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ n
2025-09-24 15:22:35,251 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:22:35,251 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:22:35,251 - INFO - âœ… Successfully connected to ArangoDB
2025-09-24 15:22:35,251 - INFO - Disconnected from ArangoDB
2025-09-24 15:22:35,251 - INFO - Starting graph database initialization...
2025-09-24 15:22:35,252 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:22:35,256 - INFO - Node collection already exists: nodes_paper
2025-09-24 15:22:35,258 - INFO - Node collection already exists: nodes_person
2025-09-24 15:22:35,260 - INFO - Node collection already exists: nodes_organization
2025-09-24 15:22:35,262 - INFO - Node collection already exists: nodes_location
2025-09-24 15:22:35,264 - INFO - Node collection already exists: nodes_concept
2025-09-24 15:22:35,266 - INFO - Node collection already exists: nodes_methodology
2025-09-24 15:22:35,268 - INFO - Edge collection already exists: edges_cites
2025-09-24 15:22:35,270 - INFO - Edge collection already exists: edges_authored_by
2025-09-24 15:22:35,272 - INFO - Edge collection already exists: edges_contains
2025-09-24 15:22:35,274 - INFO - Edge collection already exists: edges_related_to
2025-09-24 15:22:35,275 - INFO - Edge collection already exists: edges_belongs_to
2025-09-24 15:22:35,278 - INFO - Edge collection already exists: edges_located_at
2025-09-24 15:22:35,280 - INFO - Edge collection already exists: edges_uses
2025-09-24 15:22:35,282 - INFO - Graph already exists: knowledge_graph
/app/src/scripts/init_graph_db.py:228: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:22:35,286 - INFO - Created index on nodes_organization for fields: ['label']
2025-09-24 15:22:35,288 - INFO - Created index on nodes_organization for fields: ['type']
2025-09-24 15:22:35,291 - INFO - Created index on nodes_organization for fields: ['created_at']
2025-09-24 15:22:35,293 - INFO - Created index on nodes_organization for fields: ['owner_id']
2025-09-24 15:22:35,295 - INFO - Created index on nodes_paper for fields: ['label']
2025-09-24 15:22:35,297 - INFO - Created index on nodes_paper for fields: ['type']
2025-09-24 15:22:35,299 - INFO - Created index on nodes_paper for fields: ['created_at']
2025-09-24 15:22:35,301 - INFO - Created index on nodes_paper for fields: ['owner_id']
2025-09-24 15:22:35,303 - INFO - Created index on nodes_person for fields: ['label']
2025-09-24 15:22:35,305 - INFO - Created index on nodes_person for fields: ['type']
2025-09-24 15:22:35,307 - INFO - Created index on nodes_person for fields: ['created_at']
2025-09-24 15:22:35,309 - INFO - Created index on nodes_person for fields: ['owner_id']
2025-09-24 15:22:35,310 - INFO - Created index on nodes_concept for fields: ['label']
2025-09-24 15:22:35,312 - INFO - Created index on nodes_concept for fields: ['type']
2025-09-24 15:22:35,314 - INFO - Created index on nodes_concept for fields: ['created_at']
2025-09-24 15:22:35,316 - INFO - Created index on nodes_concept for fields: ['owner_id']
2025-09-24 15:22:35,318 - INFO - Created index on nodes_methodology for fields: ['label']
2025-09-24 15:22:35,320 - INFO - Created index on nodes_methodology for fields: ['type']
2025-09-24 15:22:35,321 - INFO - Created index on nodes_methodology for fields: ['created_at']
2025-09-24 15:22:35,323 - INFO - Created index on nodes_methodology for fields: ['owner_id']
2025-09-24 15:22:35,325 - INFO - Created index on nodes_location for fields: ['label']
2025-09-24 15:22:35,328 - INFO - Created index on nodes_location for fields: ['type']
2025-09-24 15:22:35,330 - INFO - Created index on nodes_location for fields: ['created_at']
2025-09-24 15:22:35,332 - INFO - Created index on nodes_location for fields: ['owner_id']
/app/src/scripts/init_graph_db.py:248: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:22:35,335 - INFO - Created index on edges_belongs_to for fields: ['label']
2025-09-24 15:22:35,337 - INFO - Created index on edges_belongs_to for fields: ['type']
2025-09-24 15:22:35,339 - INFO - Created index on edges_belongs_to for fields: ['created_at']
2025-09-24 15:22:35,341 - INFO - Created index on edges_belongs_to for fields: ['owner_id']
2025-09-24 15:22:35,343 - INFO - Created index on edges_uses for fields: ['label']
2025-09-24 15:22:35,345 - INFO - Created index on edges_uses for fields: ['type']
2025-09-24 15:22:35,347 - INFO - Created index on edges_uses for fields: ['created_at']
2025-09-24 15:22:35,349 - INFO - Created index on edges_uses for fields: ['owner_id']
2025-09-24 15:22:35,351 - INFO - Created index on edges_authored_by for fields: ['label']
2025-09-24 15:22:35,352 - INFO - Created index on edges_authored_by for fields: ['type']
2025-09-24 15:22:35,354 - INFO - Created index on edges_authored_by for fields: ['created_at']
2025-09-24 15:22:35,356 - INFO - Created index on edges_authored_by for fields: ['owner_id']
2025-09-24 15:22:35,358 - INFO - Created index on edges_cites for fields: ['label']
2025-09-24 15:22:35,360 - INFO - Created index on edges_cites for fields: ['type']
2025-09-24 15:22:35,362 - INFO - Created index on edges_cites for fields: ['created_at']
2025-09-24 15:22:35,365 - INFO - Created index on edges_cites for fields: ['owner_id']
2025-09-24 15:22:35,367 - INFO - Created index on edges_related_to for fields: ['label']
2025-09-24 15:22:35,369 - INFO - Created index on edges_related_to for fields: ['type']
2025-09-24 15:22:35,371 - INFO - Created index on edges_related_to for fields: ['created_at']
2025-09-24 15:22:35,373 - INFO - Created index on edges_related_to for fields: ['owner_id']
2025-09-24 15:22:35,374 - INFO - Created index on edges_contains for fields: ['label']
2025-09-24 15:22:35,376 - INFO - Created index on edges_contains for fields: ['type']
2025-09-24 15:22:35,378 - INFO - Created index on edges_contains for fields: ['created_at']
2025-09-24 15:22:35,380 - INFO - Created index on edges_contains for fields: ['owner_id']
2025-09-24 15:22:35,382 - INFO - Created index on edges_located_at for fields: ['label']
2025-09-24 15:22:35,384 - INFO - Created index on edges_located_at for fields: ['type']
2025-09-24 15:22:35,386 - INFO - Created index on edges_located_at for fields: ['created_at']
2025-09-24 15:22:35,388 - INFO - Created index on edges_located_at for fields: ['owner_id']
2025-09-24 15:22:35,388 - INFO - Graph database initialization completed successfully
2025-09-24 15:22:35,388 - INFO - Disconnected from ArangoDB
2025-09-24 15:22:35,388 - INFO - ðŸŽ‰ Graph database initialization completed successfully!
[?2004hroot@0190a62b9189:/app# python -m src.scripts.init_graph_db
[?2004lhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ n
2025-09-24 15:24:17,115 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:24:17,115 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:24:17,115 - INFO - âœ… Successfully connected to ArangoDB
2025-09-24 15:24:17,115 - INFO - Disconnected from ArangoDB
2025-09-24 15:24:17,115 - INFO - Starting graph database initialization...
2025-09-24 15:24:17,115 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:24:17,120 - INFO - Node collection already exists: nodes_paper
2025-09-24 15:24:17,122 - INFO - Node collection already exists: nodes_person
2025-09-24 15:24:17,124 - INFO - Node collection already exists: nodes_organization
2025-09-24 15:24:17,126 - INFO - Node collection already exists: nodes_location
2025-09-24 15:24:17,128 - INFO - Node collection already exists: nodes_concept
2025-09-24 15:24:17,129 - INFO - Node collection already exists: nodes_methodology
2025-09-24 15:24:17,131 - INFO - Edge collection already exists: edges_cites
2025-09-24 15:24:17,133 - INFO - Edge collection already exists: edges_authored_by
2025-09-24 15:24:17,135 - INFO - Edge collection already exists: edges_contains
2025-09-24 15:24:17,136 - INFO - Edge collection already exists: edges_related_to
2025-09-24 15:24:17,138 - INFO - Edge collection already exists: edges_belongs_to
2025-09-24 15:24:17,139 - INFO - Edge collection already exists: edges_located_at
2025-09-24 15:24:17,141 - INFO - Edge collection already exists: edges_uses
2025-09-24 15:24:17,142 - INFO - Graph already exists: knowledge_graph
/app/src/scripts/init_graph_db.py:228: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:24:17,147 - INFO - Created index on nodes_organization for fields: ['label']
2025-09-24 15:24:17,149 - INFO - Created index on nodes_organization for fields: ['type']
2025-09-24 15:24:17,152 - INFO - Created index on nodes_organization for fields: ['created_at']
2025-09-24 15:24:17,154 - INFO - Created index on nodes_organization for fields: ['owner_id']
2025-09-24 15:24:17,159 - INFO - Created index on nodes_paper for fields: ['label']
2025-09-24 15:24:17,161 - INFO - Created index on nodes_paper for fields: ['type']
2025-09-24 15:24:17,163 - INFO - Created index on nodes_paper for fields: ['created_at']
2025-09-24 15:24:17,165 - INFO - Created index on nodes_paper for fields: ['owner_id']
2025-09-24 15:24:17,168 - INFO - Created index on nodes_person for fields: ['label']
2025-09-24 15:24:17,171 - INFO - Created index on nodes_person for fields: ['type']
2025-09-24 15:24:17,173 - INFO - Created index on nodes_person for fields: ['created_at']
2025-09-24 15:24:17,175 - INFO - Created index on nodes_person for fields: ['owner_id']
2025-09-24 15:24:17,177 - INFO - Created index on nodes_concept for fields: ['label']
2025-09-24 15:24:17,179 - INFO - Created index on nodes_concept for fields: ['type']
2025-09-24 15:24:17,181 - INFO - Created index on nodes_concept for fields: ['created_at']
2025-09-24 15:24:17,182 - INFO - Created index on nodes_concept for fields: ['owner_id']
2025-09-24 15:24:17,184 - INFO - Created index on nodes_methodology for fields: ['label']
2025-09-24 15:24:17,187 - INFO - Created index on nodes_methodology for fields: ['type']
2025-09-24 15:24:17,193 - INFO - Created index on nodes_methodology for fields: ['created_at']
2025-09-24 15:24:17,195 - INFO - Created index on nodes_methodology for fields: ['owner_id']
2025-09-24 15:24:17,197 - INFO - Created index on nodes_location for fields: ['label']
2025-09-24 15:24:17,199 - INFO - Created index on nodes_location for fields: ['type']
2025-09-24 15:24:17,201 - INFO - Created index on nodes_location for fields: ['created_at']
2025-09-24 15:24:17,202 - INFO - Created index on nodes_location for fields: ['owner_id']
/app/src/scripts/init_graph_db.py:248: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:24:17,207 - INFO - Created index on edges_belongs_to for fields: ['label']
2025-09-24 15:24:17,209 - INFO - Created index on edges_belongs_to for fields: ['type']
2025-09-24 15:24:17,211 - INFO - Created index on edges_belongs_to for fields: ['created_at']
2025-09-24 15:24:17,213 - INFO - Created index on edges_belongs_to for fields: ['owner_id']
2025-09-24 15:24:17,215 - INFO - Created index on edges_uses for fields: ['label']
2025-09-24 15:24:17,217 - INFO - Created index on edges_uses for fields: ['type']
2025-09-24 15:24:17,219 - INFO - Created index on edges_uses for fields: ['created_at']
2025-09-24 15:24:17,221 - INFO - Created index on edges_uses for fields: ['owner_id']
2025-09-24 15:24:17,224 - INFO - Created index on edges_authored_by for fields: ['label']
2025-09-24 15:24:17,227 - INFO - Created index on edges_authored_by for fields: ['type']
2025-09-24 15:24:17,230 - INFO - Created index on edges_authored_by for fields: ['created_at']
2025-09-24 15:24:17,231 - INFO - Created index on edges_authored_by for fields: ['owner_id']
2025-09-24 15:24:17,233 - INFO - Created index on edges_cites for fields: ['label']
2025-09-24 15:24:17,235 - INFO - Created index on edges_cites for fields: ['type']
2025-09-24 15:24:17,237 - INFO - Created index on edges_cites for fields: ['created_at']
2025-09-24 15:24:17,239 - INFO - Created index on edges_cites for fields: ['owner_id']
2025-09-24 15:24:17,241 - INFO - Created index on edges_related_to for fields: ['label']
2025-09-24 15:24:17,243 - INFO - Created index on edges_related_to for fields: ['type']
2025-09-24 15:24:17,245 - INFO - Created index on edges_related_to for fields: ['created_at']
2025-09-24 15:24:17,247 - INFO - Created index on edges_related_to for fields: ['owner_id']
2025-09-24 15:24:17,249 - INFO - Created index on edges_contains for fields: ['label']
2025-09-24 15:24:17,251 - INFO - Created index on edges_contains for fields: ['type']
2025-09-24 15:24:17,253 - INFO - Created index on edges_contains for fields: ['created_at']
2025-09-24 15:24:17,255 - INFO - Created index on edges_contains for fields: ['owner_id']
2025-09-24 15:24:17,257 - INFO - Created index on edges_located_at for fields: ['label']
2025-09-24 15:24:17,259 - INFO - Created index on edges_located_at for fields: ['type']
2025-09-24 15:24:17,262 - INFO - Created index on edges_located_at for fields: ['created_at']
2025-09-24 15:24:17,264 - INFO - Created index on edges_located_at for fields: ['owner_id']
2025-09-24 15:24:17,264 - INFO - Graph database initialization completed successfully
2025-09-24 15:24:17,264 - INFO - Disconnected from ArangoDB
2025-09-24 15:24:17,264 - INFO - ðŸŽ‰ Graph database initialization completed successfully!
[?2004hroot@0190a62b9189:/app# python -m src.scripts.init_graph_db
[?2004lhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ n
2025-09-24 15:25:46,084 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:25:46,088 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:25:46,089 - INFO - âœ… Successfully connected to ArangoDB
2025-09-24 15:25:46,089 - INFO - Disconnected from ArangoDB
2025-09-24 15:25:46,089 - INFO - Starting graph database initialization...
2025-09-24 15:25:46,092 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:25:46,094 - INFO - Node collection already exists: nodes_paper
2025-09-24 15:25:46,096 - INFO - Node collection already exists: nodes_person
2025-09-24 15:25:46,097 - INFO - Node collection already exists: nodes_organization
2025-09-24 15:25:46,099 - INFO - Node collection already exists: nodes_location
2025-09-24 15:25:46,100 - INFO - Node collection already exists: nodes_concept
2025-09-24 15:25:46,102 - INFO - Node collection already exists: nodes_methodology
2025-09-24 15:25:46,103 - INFO - Edge collection already exists: edges_cites
2025-09-24 15:25:46,105 - INFO - Edge collection already exists: edges_authored_by
2025-09-24 15:25:46,107 - INFO - Edge collection already exists: edges_contains
2025-09-24 15:25:46,108 - INFO - Edge collection already exists: edges_related_to
2025-09-24 15:25:46,110 - INFO - Edge collection already exists: edges_belongs_to
2025-09-24 15:25:46,111 - INFO - Edge collection already exists: edges_located_at
2025-09-24 15:25:46,113 - INFO - Edge collection already exists: edges_uses
2025-09-24 15:25:46,115 - INFO - Graph already exists: knowledge_graph
/app/src/scripts/init_graph_db.py:228: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:25:46,120 - INFO - Created index on nodes_organization for fields: ['label']
2025-09-24 15:25:46,122 - INFO - Created index on nodes_organization for fields: ['type']
2025-09-24 15:25:46,125 - INFO - Created index on nodes_organization for fields: ['created_at']
2025-09-24 15:25:46,127 - INFO - Created index on nodes_organization for fields: ['owner_id']
2025-09-24 15:25:46,129 - INFO - Created index on nodes_paper for fields: ['label']
2025-09-24 15:25:46,131 - INFO - Created index on nodes_paper for fields: ['type']
2025-09-24 15:25:46,133 - INFO - Created index on nodes_paper for fields: ['created_at']
2025-09-24 15:25:46,135 - INFO - Created index on nodes_paper for fields: ['owner_id']
2025-09-24 15:25:46,138 - INFO - Created index on nodes_person for fields: ['label']
2025-09-24 15:25:46,143 - INFO - Created index on nodes_person for fields: ['type']
2025-09-24 15:25:46,146 - INFO - Created index on nodes_person for fields: ['created_at']
2025-09-24 15:25:46,149 - INFO - Created index on nodes_person for fields: ['owner_id']
2025-09-24 15:25:46,151 - INFO - Created index on nodes_concept for fields: ['label']
2025-09-24 15:25:46,153 - INFO - Created index on nodes_concept for fields: ['type']
2025-09-24 15:25:46,155 - INFO - Created index on nodes_concept for fields: ['created_at']
2025-09-24 15:25:46,157 - INFO - Created index on nodes_concept for fields: ['owner_id']
2025-09-24 15:25:46,163 - INFO - Created index on nodes_methodology for fields: ['label']
2025-09-24 15:25:46,166 - INFO - Created index on nodes_methodology for fields: ['type']
2025-09-24 15:25:46,169 - INFO - Created index on nodes_methodology for fields: ['created_at']
2025-09-24 15:25:46,171 - INFO - Created index on nodes_methodology for fields: ['owner_id']
2025-09-24 15:25:46,173 - INFO - Created index on nodes_location for fields: ['label']
2025-09-24 15:25:46,175 - INFO - Created index on nodes_location for fields: ['type']
2025-09-24 15:25:46,177 - INFO - Created index on nodes_location for fields: ['created_at']
2025-09-24 15:25:46,179 - INFO - Created index on nodes_location for fields: ['owner_id']
/app/src/scripts/init_graph_db.py:248: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:25:46,182 - INFO - Created index on edges_belongs_to for fields: ['label']
2025-09-24 15:25:46,184 - INFO - Created index on edges_belongs_to for fields: ['type']
2025-09-24 15:25:46,186 - INFO - Created index on edges_belongs_to for fields: ['created_at']
2025-09-24 15:25:46,188 - INFO - Created index on edges_belongs_to for fields: ['owner_id']
2025-09-24 15:25:46,190 - INFO - Created index on edges_uses for fields: ['label']
2025-09-24 15:25:46,192 - INFO - Created index on edges_uses for fields: ['type']
2025-09-24 15:25:46,195 - INFO - Created index on edges_uses for fields: ['created_at']
2025-09-24 15:25:46,199 - INFO - Created index on edges_uses for fields: ['owner_id']
2025-09-24 15:25:46,201 - INFO - Created index on edges_authored_by for fields: ['label']
2025-09-24 15:25:46,203 - INFO - Created index on edges_authored_by for fields: ['type']
2025-09-24 15:25:46,205 - INFO - Created index on edges_authored_by for fields: ['created_at']
2025-09-24 15:25:46,207 - INFO - Created index on edges_authored_by for fields: ['owner_id']
2025-09-24 15:25:46,209 - INFO - Created index on edges_cites for fields: ['label']
2025-09-24 15:25:46,211 - INFO - Created index on edges_cites for fields: ['type']
2025-09-24 15:25:46,213 - INFO - Created index on edges_cites for fields: ['created_at']
2025-09-24 15:25:46,215 - INFO - Created index on edges_cites for fields: ['owner_id']
2025-09-24 15:25:46,217 - INFO - Created index on edges_related_to for fields: ['label']
2025-09-24 15:25:46,219 - INFO - Created index on edges_related_to for fields: ['type']
2025-09-24 15:25:46,220 - INFO - Created index on edges_related_to for fields: ['created_at']
2025-09-24 15:25:46,222 - INFO - Created index on edges_related_to for fields: ['owner_id']
2025-09-24 15:25:46,224 - INFO - Created index on edges_contains for fields: ['label']
2025-09-24 15:25:46,226 - INFO - Created index on edges_contains for fields: ['type']
2025-09-24 15:25:46,228 - INFO - Created index on edges_contains for fields: ['created_at']
2025-09-24 15:25:46,230 - INFO - Created index on edges_contains for fields: ['owner_id']
2025-09-24 15:25:46,232 - INFO - Created index on edges_located_at for fields: ['label']
2025-09-24 15:25:46,234 - INFO - Created index on edges_located_at for fields: ['type']
2025-09-24 15:25:46,236 - INFO - Created index on edges_located_at for fields: ['created_at']
2025-09-24 15:25:46,238 - INFO - Created index on edges_located_at for fields: ['owner_id']
2025-09-24 15:25:46,238 - INFO - Graph database initialization completed successfully
2025-09-24 15:25:46,238 - INFO - Disconnected from ArangoDB
2025-09-24 15:25:46,239 - INFO - ðŸŽ‰ Graph database initialization completed successfully!
[?2004hroot@0190a62b9189:/app# python -m src.scripts.init_graph_db[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K[?2004l
exit
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hdocker run --rm \
    --network "$NETWORK_NAME" \[K
    -v "$APP_DIR":/app \[K
    -w /app \[K
    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \[K
    -e ARANGODB_USERNAME="root" \[K
    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[K
    -e ARANGODB_DATABASE="_system" \[K
    -it "$TESTER_IMAGE" /bin/bash[K
[K[9A[43C[9B[K[9A[43C[?1l>[?2004l[9B
]2;docker run --rm --network "$NETWORK_NAME" -v "$APP_DIR":/app -w /app -e  -e  ]1;docker[?2004hroot@6d3fd6048c5d:/app# p[K[7mpython -m src.scripts.init_graph_db[27m[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cpython -m src.scripts.init_graph_db
[?2004lhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ nhere -----> 0 \ n
2025-09-24 15:26:47,493 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:26:47,497 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:26:47,497 - INFO - âœ… Successfully connected to ArangoDB
2025-09-24 15:26:47,497 - INFO - Disconnected from ArangoDB
2025-09-24 15:26:47,498 - INFO - Starting graph database initialization...
2025-09-24 15:26:47,500 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:26:47,502 - INFO - Node collection already exists: nodes_paper
2025-09-24 15:26:47,503 - INFO - Node collection already exists: nodes_person
2025-09-24 15:26:47,505 - INFO - Node collection already exists: nodes_organization
2025-09-24 15:26:47,507 - INFO - Node collection already exists: nodes_location
2025-09-24 15:26:47,509 - INFO - Node collection already exists: nodes_concept
2025-09-24 15:26:47,510 - INFO - Node collection already exists: nodes_methodology
2025-09-24 15:26:47,512 - INFO - Edge collection already exists: edges_cites
2025-09-24 15:26:47,513 - INFO - Edge collection already exists: edges_authored_by
2025-09-24 15:26:47,515 - INFO - Edge collection already exists: edges_contains
2025-09-24 15:26:47,516 - INFO - Edge collection already exists: edges_related_to
2025-09-24 15:26:47,518 - INFO - Edge collection already exists: edges_belongs_to
2025-09-24 15:26:47,520 - INFO - Edge collection already exists: edges_located_at
2025-09-24 15:26:47,521 - INFO - Edge collection already exists: edges_uses
2025-09-24 15:26:47,523 - INFO - Graph already exists: knowledge_graph
/app/src/scripts/init_graph_db.py:228: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:26:47,528 - INFO - Created index on nodes_organization for fields: ['label']
2025-09-24 15:26:47,530 - INFO - Created index on nodes_organization for fields: ['type']
2025-09-24 15:26:47,534 - INFO - Created index on nodes_organization for fields: ['created_at']
2025-09-24 15:26:47,538 - INFO - Created index on nodes_organization for fields: ['owner_id']
2025-09-24 15:26:47,541 - INFO - Created index on nodes_paper for fields: ['label']
2025-09-24 15:26:47,545 - INFO - Created index on nodes_paper for fields: ['type']
2025-09-24 15:26:47,547 - INFO - Created index on nodes_paper for fields: ['created_at']
2025-09-24 15:26:47,549 - INFO - Created index on nodes_paper for fields: ['owner_id']
2025-09-24 15:26:47,551 - INFO - Created index on nodes_person for fields: ['label']
2025-09-24 15:26:47,553 - INFO - Created index on nodes_person for fields: ['type']
2025-09-24 15:26:47,555 - INFO - Created index on nodes_person for fields: ['created_at']
2025-09-24 15:26:47,557 - INFO - Created index on nodes_person for fields: ['owner_id']
2025-09-24 15:26:47,559 - INFO - Created index on nodes_concept for fields: ['label']
2025-09-24 15:26:47,561 - INFO - Created index on nodes_concept for fields: ['type']
2025-09-24 15:26:47,563 - INFO - Created index on nodes_concept for fields: ['created_at']
2025-09-24 15:26:47,565 - INFO - Created index on nodes_concept for fields: ['owner_id']
2025-09-24 15:26:47,567 - INFO - Created index on nodes_methodology for fields: ['label']
2025-09-24 15:26:47,569 - INFO - Created index on nodes_methodology for fields: ['type']
2025-09-24 15:26:47,571 - INFO - Created index on nodes_methodology for fields: ['created_at']
2025-09-24 15:26:47,573 - INFO - Created index on nodes_methodology for fields: ['owner_id']
2025-09-24 15:26:47,576 - INFO - Created index on nodes_location for fields: ['label']
2025-09-24 15:26:47,577 - INFO - Created index on nodes_location for fields: ['type']
2025-09-24 15:26:47,579 - INFO - Created index on nodes_location for fields: ['created_at']
2025-09-24 15:26:47,581 - INFO - Created index on nodes_location for fields: ['owner_id']
/app/src/scripts/init_graph_db.py:248: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:26:47,585 - INFO - Created index on edges_belongs_to for fields: ['label']
2025-09-24 15:26:47,588 - INFO - Created index on edges_belongs_to for fields: ['type']
2025-09-24 15:26:47,594 - INFO - Created index on edges_belongs_to for fields: ['created_at']
2025-09-24 15:26:47,597 - INFO - Created index on edges_belongs_to for fields: ['owner_id']
2025-09-24 15:26:47,599 - INFO - Created index on edges_uses for fields: ['label']
2025-09-24 15:26:47,601 - INFO - Created index on edges_uses for fields: ['type']
2025-09-24 15:26:47,603 - INFO - Created index on edges_uses for fields: ['created_at']
2025-09-24 15:26:47,605 - INFO - Created index on edges_uses for fields: ['owner_id']
2025-09-24 15:26:47,608 - INFO - Created index on edges_authored_by for fields: ['label']
2025-09-24 15:26:47,610 - INFO - Created index on edges_authored_by for fields: ['type']
2025-09-24 15:26:47,612 - INFO - Created index on edges_authored_by for fields: ['created_at']
2025-09-24 15:26:47,613 - INFO - Created index on edges_authored_by for fields: ['owner_id']
2025-09-24 15:26:47,615 - INFO - Created index on edges_cites for fields: ['label']
2025-09-24 15:26:47,617 - INFO - Created index on edges_cites for fields: ['type']
2025-09-24 15:26:47,619 - INFO - Created index on edges_cites for fields: ['created_at']
2025-09-24 15:26:47,621 - INFO - Created index on edges_cites for fields: ['owner_id']
2025-09-24 15:26:47,623 - INFO - Created index on edges_related_to for fields: ['label']
2025-09-24 15:26:47,625 - INFO - Created index on edges_related_to for fields: ['type']
2025-09-24 15:26:47,627 - INFO - Created index on edges_related_to for fields: ['created_at']
2025-09-24 15:26:47,629 - INFO - Created index on edges_related_to for fields: ['owner_id']
2025-09-24 15:26:47,631 - INFO - Created index on edges_contains for fields: ['label']
2025-09-24 15:26:47,633 - INFO - Created index on edges_contains for fields: ['type']
2025-09-24 15:26:47,635 - INFO - Created index on edges_contains for fields: ['created_at']
2025-09-24 15:26:47,637 - INFO - Created index on edges_contains for fields: ['owner_id']
2025-09-24 15:26:47,639 - INFO - Created index on edges_located_at for fields: ['label']
2025-09-24 15:26:47,642 - INFO - Created index on edges_located_at for fields: ['type']
2025-09-24 15:26:47,644 - INFO - Created index on edges_located_at for fields: ['created_at']
2025-09-24 15:26:47,646 - INFO - Created index on edges_located_at for fields: ['owner_id']
2025-09-24 15:26:47,646 - INFO - Graph database initialization completed successfully
2025-09-24 15:26:47,646 - INFO - Disconnected from ArangoDB
2025-09-24 15:26:47,646 - INFO - ðŸŽ‰ Graph database initialization completed successfully!
[?2004hroot@6d3fd6048c5d:/app# cat p[Ksrcv[K/scripts/p[Kinit_graph_db.py
[?2004l# src/scripts/init_graph_db.py
#!/usr/bin/env python3
"""
Script to initialize the ArangoDB graph database with required collections and indexes.
"""

import logging
import sys
import asyncio
from pathlib import Path

# Add the src directory to the Python path
sys.path.insert(0, str(Path(__file__).parent.parent))

from src.services.graph_db import get_graph_db_service
from src.config import settings

logging.basicConfig(level=logging.INFO,
                    format='%(asctime)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)


class GraphDBInitializer:
    """Initialize the graph database with required structure"""

    def __init__(self):
        self.graph_db = get_graph_db_service()

    async def initialize(self):
        """Initialize the graph database"""
        try:
            logger.info("Starting graph database initialization...")

            # Connect to the database
            if not await self.graph_db.connect():
                logger.error("Failed to connect to graph database")
                return False

            # Create node collections
            await self._create_node_collections()

            # Create edge collections
            await self._create_edge_collections()

            # Create graph (if using named graphs)
            await self._create_knowledge_graph()

            # Create indexes
            await self._create_indexes()

            logger.info("Graph database initialization completed successfully")
            return True

        except Exception as e:
            logger.error(f"Error initializing graph database: {e}")
            return False
        finally:
            await self.graph_db.disconnect()

    async def _create_node_collections(self):
        """Create node collections for different entity types"""
        node_collections = [
            "nodes_paper", "nodes_person", "nodes_organization",
            "nodes_location", "nodes_concept", "nodes_methodology"
        ]

        for collection_name in node_collections:
            try:
                # Check if collection exists
                collections = [
                    col for col in self.graph_db.db.collections()
                    if col['name'] == collection_name
                ]

                if not collections:
                    self.graph_db.db.create_collection(collection_name)
                    logger.info(f"Created node collection: {collection_name}")
                else:
                    logger.info(
                        f"Node collection already exists: {collection_name}")

            except Exception as e:
                logger.error(
                    f"Error creating node collection {collection_name}: {e}")

    async def _create_edge_collections(self):
        """Create edge collections for different relationship types"""
        edge_collections = [
            ("edges_cites", "CITATION relationships between papers"),
            ("edges_authored_by",
             "AUTHOR relationships between papers and people"),
            ("edges_contains",
             "CONTAINS relationships between papers and entities"),
            ("edges_related_to", "GENERIC relationships between entities"),
            ("edges_belongs_to",
             "MEMBERSHIP relationships (e.g., person to organization)"),
            ("edges_located_at", "LOCATION relationships"),
            ("edges_uses",
             "USAGE relationships (e.g., paper uses methodology)")
        ]

        for collection_name, description in edge_collections:
            try:
                # Check if collection exists
                collections = [
                    col for col in self.graph_db.db.collections()
                    if col['name'] == collection_name
                ]

                if not collections:
                    self.graph_db.db.create_collection(collection_name,
                                                       edge=True)
                    logger.info(
                        f"Created edge collection: {collection_name} - {description}"
                    )
                else:
                    logger.info(
                        f"Edge collection already exists: {collection_name}")

            except Exception as e:
                logger.error(
                    f"Error creating edge collection {collection_name}: {e}")

    async def _create_knowledge_graph(self):
        """Create the knowledge graph with edge definitions"""
        try:
            graph_name = "knowledge_graph"

            # Check if graph already exists
            if self.graph_db.db.has_graph(graph_name):
                logger.info(f"Graph already exists: {graph_name}")
                return

            # Define edge collections for the graph
            edge_definitions = [{
                "edge_collection": "edges_cites",
                "from_vertex_collections": ["nodes_paper"],
                "to_vertex_collections": ["nodes_paper"]
            }, {
                "edge_collection": "edges_authored_by",
                "from_vertex_collections": ["nodes_paper"],
                "to_vertex_collections": ["nodes_person"]
            }, {
                "edge_collection":
                "edges_contains",
                "from_vertex_collections": ["nodes_paper"],
                "to_vertex_collections": [
                    "nodes_person", "nodes_organization", "nodes_location",
                    "nodes_concept", "nodes_methodology"
                ]
            }, {
                "edge_collection":
                "edges_related_to",
                "from_vertex_collections": [
                    "nodes_person", "nodes_organization", "nodes_location",
                    "nodes_concept", "nodes_methodology"
                ],
                "to_vertex_collections": [
                    "nodes_person", "nodes_organization", "nodes_location",
                    "nodes_concept", "nodes_methodology"
                ]
            }, {
                "edge_collection": "edges_belongs_to",
                "from_vertex_collections": ["nodes_person"],
                "to_vertex_collections": ["nodes_organization"]
            }, {
                "edge_collection":
                "edges_located_at",
                "from_vertex_collections":
                ["nodes_person", "nodes_organization"],
                "to_vertex_collections": ["nodes_location"]
            }, {
                "edge_collection": "edges_uses",
                "from_vertex_collections": ["nodes_paper"],
                "to_vertex_collections": ["nodes_methodology"]
            }]

            # Create the graph
            self.graph_db.db.create_graph(graph_name, edge_definitions)
            logger.info(f"Created knowledge graph: {graph_name}")

        except Exception as e:
            logger.error(f"Error creating knowledge graph: {e}")

    async def _create_indexes(self):
        """Create indexes for better query performance"""
        try:
            # Indexes for node collections
            node_indexes = [{
                "type": "persistent",
                "fields": ["label"]
            }, {
                "type": "persistent",
                "fields": ["type"]
            }, {
                "type": "persistent",
                "fields": ["created_at"]
            }, {
                "type": "persistent",
                "fields": ["owner_id"]
            }]

            # Indexes for edge collections
            edge_indexes = [{
                "type": "persistent",
                "fields": ["label"]
            }, {
                "type": "persistent",
                "fields": ["type"]
            }, {
                "type": "persistent",
                "fields": ["created_at"]
            }, {
                "type": "persistent",
                "fields": ["owner_id"]
            }]

            # Create indexes for all node collections
            node_collections = [
                col for col in self.graph_db.db.collections()
                if col['name'].startswith('nodes_')
            ]

            for col_info in node_collections:
                collection = self.graph_db.db.collection(col_info['name'])
                for index_config in node_indexes:
                    try:
                        collection.add_persistent_index(
                            fields=index_config["fields"])
                        logger.info(
                            f"Created index on {col_info['name']} for fields: {index_config['fields']}"
                        )
                    except Exception as e:
                        logger.debug(
                            f"Index may already exist on {col_info['name']}: {e}"
                        )

            # Create indexes for all edge collections
            edge_collections = [
                col for col in self.graph_db.db.collections()
                if col['name'].startswith('edges_')
            ]

            for col_info in edge_collections:
                collection = self.graph_db.db.collection(col_info['name'])
                for index_config in edge_indexes:
                    try:
                        collection.add_persistent_index(
                            fields=index_config["fields"])
                        logger.info(
                            f"Created index on {col_info['name']} for fields: {index_config['fields']}"
                        )
                    except Exception as e:
                        logger.debug(
                            f"Index may already exist on {col_info['name']}: {e}"
                        )

        except Exception as e:
            logger.error(f"Error creating indexes: {e}")

    async def check_connection(self):
        """Test database connection"""
        try:
            if await self.graph_db.connect():
                logger.info("âœ… Successfully connected to ArangoDB")
                await self.graph_db.disconnect()
                return True
            else:
                logger.error("âŒ Failed to connect to ArangoDB")
                return False
        except Exception as e:
            logger.error(f"âŒ Connection test failed: {e}")
            return False


async def main():
    """Main function"""
    initializer = GraphDBInitializer()

    # Test connection first
    if not await initializer.check_connection():
        sys.exit(1)

    # Initialize the database
    success = await initializer.initialize()

    if success:
        logger.info("ðŸŽ‰ Graph database initialization completed successfully!")
        sys.exit(0)
    else:
        logger.error("ðŸ’¥ Graph database initialization failed!")
        sys.exit(1)


if __name__ == "__main__":
    asyncio.run(main())
[?2004hroot@6d3fd6048c5d:/app# cat src/scripts/init_graph_db.py[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[Kervices/ar[K[Kgraph_db/arangodb.py
[?2004l# src/services/graph_db/arangodb.py
import logging
from typing import List, Dict, Any, Optional
from arango import ArangoClient
from arango.exceptions import ArangoError
from datetime import datetime

from .base import GraphDBService, Node, Edge, GraphQueryResult
from src.config import settings

logger = logging.getLogger(__name__)


class ArangoDBService(GraphDBService):
    """ArangoDB implementation of the graph database service"""

    def __init__(self):
        print('here -----> 0 \ n' * 10)
        self.host = settings.arangodb_host
        self.username = settings.arangodb_username
        self.password = settings.arangodb_password
        self.database_name = settings.arangodb_database
        self.client = None
        self.db = None

        logger.info(f"Initialized ArangoDB service with host: {self.host}")

    # async def connect(self) -> bool:
    #     """Connect to ArangoDB"""
    #     try:
    #         print('here -----> 1 \ n' * 10)
    #         self.client = ArangoClient(hosts=self.host)

    #         # Connect to the _system database to manage other databases
    #         sys_db = self.client.db(name="_system",
    #                                 username=self.username,
    #                                 password=self.password)

    #         print('here -----> 2 \ n' * 10)

    #         # Check if the target database exists; if not, create it
    #         if not sys_db.has_database(self.database_name):
    #             sys_db.create_database(self.database_name)
    #             logger.info(f"Created new database: {self.database_name}")

    #         # Now, connect to the correct database
    #         self.db = self.client.db(name=self.database_name,
    #                                  username=self.username,
    #                                  password=self.password)

    #         logger.info(
    #             f"Connected to ArangoDB database: {self.database_name}")
    #         return True

    #     except ArangoError as e:
    #         logger.error(f"Error connecting to ArangoDB: {e}")
    #         return False

    async def connect(self) -> bool:
        """Connect to ArangoDB"""
        try:
            # Initialize the ArangoDB client
            self.client = ArangoClient(hosts=self.host)

            # Connect to the _system database to manage other databases
            sys_db = self.client.db(name="_system",
                                    username=self.username,
                                    password=self.password)

            # Check if the target database exists; if not, create it
            if not sys_db.has_database(self.database_name):
                sys_db.create_database(self.database_name)
                logger.info(f"Created new database: {self.database_name}")

            # Now, connect to the correct database
            self.db = self.client.db(name=self.database_name,
                                     username=self.username,
                                     password=self.password)

            # # Connect to the database
            # self.db = self.client.db(name=self.database_name,
            #                          username=self.username,
            #                          password=self.password)

            logger.info(
                f"Connected to ArangoDB database: {self.database_name}")
            return True

        except ArangoError as e:
            logger.error(f"Error connecting to ArangoDB: {e}")
            return False

    # async def connect(self) -> bool:
    #     """Connect to ArangoDB"""
    #     try:
    #         # Initialize the ArangoDB client
    #         self.client = ArangoClient(hosts=self.host)

    #         # Connect to the database
    #         self.db = self.client.db(name=self.database_name,
    #                                  username=self.username,
    #                                  password=self.password)

    #         logger.info(
    #             f"Connected to ArangoDB database: {self.database_name}")
    #         return True

    #     except ArangoError as e:
    #         logger.error(f"Error connecting to ArangoDB: {e}")
    #         return False

    async def disconnect(self) -> bool:
        """Disconnect from ArangoDB"""
        try:
            if self.client:
                self.client.close()
                logger.info("Disconnected from ArangoDB")
                return True
            return False

        except ArangoError as e:
            logger.error(f"Error disconnecting from ArangoDB: {e}")
            return False

    async def upsert_node(self, node: Node) -> bool:
        """Insert or update a node in ArangoDB"""
        try:
            collection_name = f"nodes_{node.type}"

            # Ensure the collection exists
            if not self.db.has_collection(collection_name):
                self.db.create_collection(collection_name)

            collection = self.db.collection(collection_name)

            # Prepare document
            document = {
                "_key": node.id,
                "label": node.label,
                **node.properties, "created_at": datetime.utcnow().isoformat(),
                "updated_at": datetime.utcnow().isoformat()
            }

            # Upsert the document
            collection.upsert({"_key": node.id}, document, return_new=False)

            logger.debug(
                f"Upserted node: {node.id} in collection: {collection_name}")
            return True

        except ArangoError as e:
            logger.error(f"Error upserting node in ArangoDB: {e}")
            return False

    async def upsert_edge(self, edge: Edge) -> bool:
        """Insert or update an edge in ArangoDB"""
        try:
            collection_name = f"edges_{edge.type}"

            # Ensure the edge collection exists
            if not self.db.has_collection(collection_name):
                self.db.create_collection(collection_name, edge=True)

            collection = self.db.collection(collection_name)

            # Prepare edge document
            document = {
                "_key": edge.id,
                "_from": edge.source_id,
                "_to": edge.target_id,
                "label": edge.label,
                **edge.properties, "created_at": datetime.utcnow().isoformat(),
                "updated_at": datetime.utcnow().isoformat()
            }

            # Upsert the edge
            collection.upsert({"_key": edge.id}, document, return_new=False)

            logger.debug(
                f"Upserted edge: {edge.id} in collection: {collection_name}")
            return True

        except ArangoError as e:
            logger.error(f"Error upserting edge in ArangoDB: {e}")
            return False

    async def get_node(self, node_id: str) -> Optional[Node]:
        """Get a node by ID from ArangoDB"""
        try:
            # Node ID format: collection_name/key
            if '/' in node_id:
                collection_name, key = node_id.split('/', 1)
            else:
                # Try to find the node in any collection
                collections = [
                    col for col in self.db.collections()
                    if col['name'].startswith('nodes_')
                ]
                for col_info in collections:
                    collection = self.db.collection(col_info['name'])
                    if collection.has(node_id):
                        collection_name = col_info['name']
                        key = node_id
                        break
                else:
                    return None

            collection = self.db.collection(collection_name)
            document = collection.get(key)

            if document:
                node_type = collection_name.replace('nodes_', '')
                properties = {
                    k: v
                    for k, v in document.items() if k not in [
                        '_key', '_id', '_rev', 'label', 'created_at',
                        'updated_at'
                    ]
                }

                return Node(id=document['_key'],
                            label=document.get('label', ''),
                            properties=properties,
                            type=node_type)

            return None

        except ArangoError as e:
            logger.error(f"Error getting node from ArangoDB: {e}")
            return None

    async def get_edge(self, edge_id: str) -> Optional[Edge]:
        """Get an edge by ID from ArangoDB"""
        try:
            # Edge ID format: collection_name/key
            if '/' in edge_id:
                collection_name, key = edge_id.split('/', 1)
            else:
                # Try to find the edge in any collection
                collections = [
                    col for col in self.db.collections()
                    if col['name'].startswith('edges_')
                ]
                for col_info in collections:
                    collection = self.db.collection(col_info['name'])
                    if collection.has(edge_id):
                        collection_name = col_info['name']
                        key = edge_id
                        break
                else:
                    return None

            collection = self.db.collection(collection_name)
            document = collection.get(key)

            if document:
                edge_type = collection_name.replace('edges_', '')
                properties = {
                    k: v
                    for k, v in document.items() if k not in [
                        '_key', '_id', '_rev', '_from', '_to', 'label',
                        'created_at', 'updated_at'
                    ]
                }

                return Edge(id=document['_key'],
                            source_id=document['_from'],
                            target_id=document['_to'],
                            label=document.get('label', ''),
                            properties=properties,
                            type=edge_type)

            return None

        except ArangoError as e:
            logger.error(f"Error getting edge from ArangoDB: {e}")
            return None

    async def query_nodes(self,
                          label: Optional[str] = None,
                          properties: Optional[Dict[str, Any]] = None,
                          limit: int = 100) -> List[Node]:
        """Query nodes by label and/or properties in ArangoDB"""
        try:
            # This is a simplified implementation
            # In a real implementation, you would use AQL queries
            collections = [
                col for col in self.db.collections()
                if col['name'].startswith('nodes_')
            ]
            results = []

            for col_info in collections:
                collection = self.db.collection(col_info['name'])
                node_type = col_info['name'].replace('nodes_', '')

                # Build filter conditions
                filters = []
                if label:
                    filters.append(f"doc.label == '{label}'")
                if properties:
                    for key, value in properties.items():
                        filters.append(f"doc.{key} == {repr(value)}")

                # Build AQL query
                filter_str = " AND ".join(filters) if filters else "true"
                query = f"""
                FOR doc IN {collection.name}
                FILTER {filter_str}
                LIMIT {limit}
                RETURN doc
                """

                cursor = self.db.aql.execute(query)
                for doc in cursor:
                    doc_properties = {
                        k: v
                        for k, v in doc.items() if k not in [
                            '_key', '_id', '_rev', 'label', 'created_at',
                            'updated_at'
                        ]
                    }

                    results.append(
                        Node(id=doc['_key'],
                             label=doc.get('label', ''),
                             properties=doc_properties,
                             type=node_type))

            return results

        except ArangoError as e:
            logger.error(f"Error querying nodes in ArangoDB: {e}")
            return []

    async def query_edges(self,
                          label: Optional[str] = None,
                          properties: Optional[Dict[str, Any]] = None,
                          limit: int = 100) -> List[Edge]:
        """Query edges by label and/or properties in ArangoDB"""
        try:
            # This is a simplified implementation
            collections = [
                col for col in self.db.collections()
                if col['name'].startswith('edges_')
            ]
            results = []

            for col_info in collections:
                collection = self.db.collection(col_info['name'])
                edge_type = col_info['name'].replace('edges_', '')

                # Build filter conditions
                filters = []
                if label:
                    filters.append(f"doc.label == '{label}'")
                if properties:
                    for key, value in properties.items():
                        filters.append(f"doc.{key} == {repr(value)}")

                # Build AQL query
                filter_str = " AND ".join(filters) if filters else "true"
                query = f"""
                FOR doc IN {collection.name}
                FILTER {filter_str}
                LIMIT {limit}
                RETURN doc
                """

                cursor = self.db.aql.execute(query)
                for doc in cursor:
                    doc_properties = {
                        k: v
                        for k, v in doc.items() if k not in [
                            '_key', '_id', '_rev', '_from', '_to', 'label',
                            'created_at', 'updated_at'
                        ]
                    }

                    results.append(
                        Edge(id=doc['_key'],
                             source_id=doc['_from'],
                             target_id=doc['_to'],
                             label=doc.get('label', ''),
                             properties=doc_properties,
                             type=edge_type))

            return results

        except ArangoError as e:
            logger.error(f"Error querying edges in ArangoDB: {e}")
            return []

    async def traverse(
            self,
            start_node_id: str,
            min_depth: int = 1,
            max_depth: int = 3,
            direction: str = "any",
            edge_labels: Optional[List[str]] = None) -> GraphQueryResult:
        """Traverse the graph from a starting node in ArangoDB"""
        try:
            # Build AQL query for traversal
            edge_filter = ""
            if edge_labels:
                edge_labels_str = ", ".join([f"'{l}'" for l in edge_labels])
                edge_filter = f"FILTER edge.label IN [{edge_labels_str}]"

            direction_map = {
                "outbound": "OUTBOUND",
                "inbound": "INBOUND",
                "any": "ANY"
            }
            aql_direction = direction_map.get(direction, "ANY")

            query = f"""
            FOR vertex, edge, path IN {min_depth}..{max_depth} {aql_direction}
            '{start_node_id}' GRAPH 'knowledge_graph'
            {edge_filter}
            RETURN {{vertex: vertex, edge: edge}}
            """

            start_time = datetime.now()
            cursor = self.db.aql.execute(query)
            execution_time = (datetime.now() - start_time).total_seconds()

            nodes = []
            edges = []

            for result in cursor:
                if 'vertex' in result:
                    vertex = result['vertex']
                    node_type = vertex['_id'].split('/')[0].replace(
                        'nodes_', '')
                    properties = {
                        k: v
                        for k, v in vertex.items() if k not in [
                            '_key', '_id', '_rev', 'label', 'created_at',
                            'updated_at'
                        ]
                    }

                    nodes.append(
                        Node(id=vertex['_key'],
                             label=vertex.get('label', ''),
                             properties=properties,
                             type=node_type))

                if 'edge' in result:
                    edge = result['edge']
                    edge_type = edge['_id'].split('/')[0].replace('edges_', '')
                    properties = {
                        k: v
                        for k, v in edge.items() if k not in [
                            '_key', '_id', '_rev', '_from', '_to', 'label',
                            'created_at', 'updated_at'
                        ]
                    }

                    edges.append(
                        Edge(id=edge['_key'],
                             source_id=edge['_from'],
                             target_id=edge['_to'],
                             label=edge.get('label', ''),
                             properties=properties,
                             type=edge_type))

            return GraphQueryResult(nodes=nodes,
                                    edges=edges,
                                    execution_time=execution_time)

        except ArangoError as e:
            logger.error(f"Error traversing graph in ArangoDB: {e}")
            return GraphQueryResult(nodes=[], edges=[], execution_time=0)

    async def delete_node(self, node_id: str) -> bool:
        """Delete a node and its edges from ArangoDB"""
        try:
            # Node ID format: collection_name/key
            if '/' in node_id:
                collection_name, key = node_id.split('/', 1)
            else:
                # Try to find the node in any collection
                collections = [
                    col for col in self.db.collections()
                    if col['name'].startswith('nodes_')
                ]
                for col_info in collections:
                    collection = self.db.collection(col_info['name'])
                    if collection.has(node_id):
                        collection_name = col_info['name']
                        key = node_id
                        break
                else:
                    return False

            collection = self.db.collection(collection_name)
            collection.delete(key)

            logger.info(f"Deleted node: {node_id}")
            return True

        except ArangoError as e:
            logger.error(f"Error deleting node from ArangoDB: {e}")
            return False

    async def delete_edge(self, edge_id: str) -> bool:
        """Delete an edge from ArangoDB"""
        try:
            # Edge ID format: collection_name/key
            if '/' in edge_id:
                collection_name, key = edge_id.split('/', 1)
            else:
                # Try to find the edge in any collection
                collections = [
                    col for col in self.db.collections()
                    if col['name'].startswith('edges_')
                ]
                for col_info in collections:
                    collection = self.db.collection(col_info['name'])
                    if collection.has(edge_id):
                        collection_name = col_info['name']
                        key = edge_id
                        break
                else:
                    return False

            collection = self.db.collection(collection_name)
            collection.delete(key)

            logger.info(f"Deleted edge: {edge_id}")
            return True

        except ArangoError as e:
            logger.error(f"Error deleting edge from ArangoDB: {e}")
            return False

    async def execute_query(
            self,
            query: str,
            params: Optional[Dict[str, Any]] = None) -> GraphQueryResult:
        """Execute a custom AQL query in ArangoDB"""
        try:
            start_time = datetime.now()
            cursor = self.db.aql.execute(query, bind_vars=params or {})
            execution_time = (datetime.now() - start_time).total_seconds()

            nodes = []
            edges = []

            for result in cursor:
                # This is a simplified implementation
                # In a real implementation, you would parse the result based on the query
                if '_id' in result and result['_id'].startswith('nodes_'):
                    node_type = result['_id'].split('/')[0].replace(
                        'nodes_', '')
                    properties = {
                        k: v
                        for k, v in result.items() if k not in [
                            '_key', '_id', '_rev', 'label', 'created_at',
                            'updated_at'
                        ]
                    }

                    nodes.append(
                        Node(id=result['_key'],
                             label=result.get('label', ''),
                             properties=properties,
                             type=node_type))
                elif '_id' in result and result['_id'].startswith('edges_'):
                    edge_type = result['_id'].split('/')[0].replace(
                        'edges_', '')
                    properties = {
                        k: v
                        for k, v in result.items() if k not in [
                            '_key', '_id', '_rev', '_from', '_to', 'label',
                            'created_at', 'updated_at'
                        ]
                    }

                    edges.append(
                        Edge(id=result['_key'],
                             source_id=result['_from'],
                             target_id=result['_to'],
                             label=result.get('label', ''),
                             properties=properties,
                             type=edge_type))

            return GraphQueryResult(nodes=nodes,
                                    edges=edges,
                                    execution_time=execution_time)

        except ArangoError as e:
            logger.error(f"Error executing AQL query in ArangoDB: {e}")
            return GraphQueryResult(nodes=[], edges=[], execution_time=0)
[?2004hroot@6d3fd6048c5d:/app# cat src/services/graph_db/arangodb.py
[?2004l\# src/services/graph_db/arangodb.py
import logging
from typing import List, Dict, Any, Optional
from arango import ArangoClient
from arango.exceptions import ArangoError
from datetime import datetime

from .base import GraphDBService, Node, Edge, GraphQueryResult
from src.config import settings

logger = logging.getLogger(__name__)


class ArangoDBService(GraphDBService):
    """ArangoDB implementation of the graph database service"""

    def __init__(self):
        self.host = settings.arangodb_host
        self.username = settings.arangodb_username
        self.password = settings.arangodb_password
        self.database_name = settings.arangodb_database
        self.client = None
        self.db = None

        logger.info(f"Initialized ArangoDB service with host: {self.host}")

    # async def connect(self) -> bool:
    #     """Connect to ArangoDB"""
    #     try:
    #         print('here -----> 1 \ n' * 10)
    #         self.client = ArangoClient(hosts=self.host)

    #         # Connect to the _system database to manage other databases
    #         sys_db = self.client.db(name="_system",
    #                                 username=self.username,
    #                                 password=self.password)

    #         print('here -----> 2 \ n' * 10)

    #         # Check if the target database exists; if not, create it
    #         if not sys_db.has_database(self.database_name):
    #             sys_db.create_database(self.database_name)
    #             logger.info(f"Created new database: {self.database_name}")

    #         # Now, connect to the correct database
    #         self.db = self.client.db(name=self.database_name,
    #                                  username=self.username,
    #                                  password=self.password)

    #         logger.info(
    #             f"Connected to ArangoDB database: {self.database_name}")
    #         return True

    #     except ArangoError as e:
    #         logger.error(f"Error connecting to ArangoDB: {e}")
    #         return False

    async def connect(self) -> bool:
        """Connect to ArangoDB"""
        try:
            # Initialize the ArangoDB client
            self.client = ArangoClient(hosts=self.host)

            # Connect to the _system database to manage other databases
            sys_db = self.client.db(name="_system",
                                    username=self.username,
                                    password=self.password)

            # Check if the target database exists; if not, create it
            if not sys_db.has_database(self.database_name):
                sys_db.create_database(self.database_name)
                logger.info(f"Created new database: {self.database_name}")

            # Now, connect to the correct database
            self.db = self.client.db(name=self.database_name,
                                     username=self.username,
                                     password=self.password)

            # # Connect to the database
            # self.db = self.client.db(name=self.database_name,
            #                          username=self.username,
            #                          password=self.password)

            logger.info(
                f"Connected to ArangoDB database: {self.database_name}")
            return True

        except ArangoError as e:
            logger.error(f"Error connecting to ArangoDB: {e}")
            return False

    # async def connect(self) -> bool:
    #     """Connect to ArangoDB"""
    #     try:
    #         # Initialize the ArangoDB client
    #         self.client = ArangoClient(hosts=self.host)

    #         # Connect to the database
    #         self.db = self.client.db(name=self.database_name,
    #                                  username=self.username,
    #                                  password=self.password)

    #         logger.info(
    #             f"Connected to ArangoDB database: {self.database_name}")
    #         return True

    #     except ArangoError as e:
    #         logger.error(f"Error connecting to ArangoDB: {e}")
    #         return False

    async def disconnect(self) -> bool:
        """Disconnect from ArangoDB"""
        try:
            if self.client:
                self.client.close()
                logger.info("Disconnected from ArangoDB")
                return True
            return False

        except ArangoError as e:
            logger.error(f"Error disconnecting from ArangoDB: {e}")
            return False

    async def upsert_node(self, node: Node) -> bool:
        """Insert or update a node in ArangoDB"""
        try:
            collection_name = f"nodes_{node.type}"

            # Ensure the collection exists
            if not self.db.has_collection(collection_name):
                self.db.create_collection(collection_name)

            collection = self.db.collection(collection_name)

            # Prepare document
            document = {
                "_key": node.id,
                "label": node.label,
                **node.properties, "created_at": datetime.utcnow().isoformat(),
                "updated_at": datetime.utcnow().isoformat()
            }

            # Upsert the document
            collection.upsert({"_key": node.id}, document, return_new=False)

            logger.debug(
                f"Upserted node: {node.id} in collection: {collection_name}")
            return True

        except ArangoError as e:
            logger.error(f"Error upserting node in ArangoDB: {e}")
            return False

    async def upsert_edge(self, edge: Edge) -> bool:
        """Insert or update an edge in ArangoDB"""
        try:
            collection_name = f"edges_{edge.type}"

            # Ensure the edge collection exists
            if not self.db.has_collection(collection_name):
                self.db.create_collection(collection_name, edge=True)

            collection = self.db.collection(collection_name)

            # Prepare edge document
            document = {
                "_key": edge.id,
                "_from": edge.source_id,
                "_to": edge.target_id,
                "label": edge.label,
                **edge.properties, "created_at": datetime.utcnow().isoformat(),
                "updated_at": datetime.utcnow().isoformat()
            }

            # Upsert the edge
            collection.upsert({"_key": edge.id}, document, return_new=False)

            logger.debug(
                f"Upserted edge: {edge.id} in collection: {collection_name}")
            return True

        except ArangoError as e:
            logger.error(f"Error upserting edge in ArangoDB: {e}")
            return False

    async def get_node(self, node_id: str) -> Optional[Node]:
        """Get a node by ID from ArangoDB"""
        try:
            # Node ID format: collection_name/key
            if '/' in node_id:
                collection_name, key = node_id.split('/', 1)
            else:
                # Try to find the node in any collection
                collections = [
                    col for col in self.db.collections()
                    if col['name'].startswith('nodes_')
                ]
                for col_info in collections:
                    collection = self.db.collection(col_info['name'])
                    if collection.has(node_id):
                        collection_name = col_info['name']
                        key = node_id
                        break
                else:
                    return None

            collection = self.db.collection(collection_name)
            document = collection.get(key)

            if document:
                node_type = collection_name.replace('nodes_', '')
                properties = {
                    k: v
                    for k, v in document.items() if k not in [
                        '_key', '_id', '_rev', 'label', 'created_at',
                        'updated_at'
                    ]
                }

                return Node(id=document['_key'],
                            label=document.get('label', ''),
                            properties=properties,
                            type=node_type)

            return None

        except ArangoError as e:
            logger.error(f"Error getting node from ArangoDB: {e}")
            return None

    async def get_edge(self, edge_id: str) -> Optional[Edge]:
        """Get an edge by ID from ArangoDB"""
        try:
            # Edge ID format: collection_name/key
            if '/' in edge_id:
                collection_name, key = edge_id.split('/', 1)
            else:
                # Try to find the edge in any collection
                collections = [
                    col for col in self.db.collections()
                    if col['name'].startswith('edges_')
                ]
                for col_info in collections:
                    collection = self.db.collection(col_info['name'])
                    if collection.has(edge_id):
                        collection_name = col_info['name']
                        key = edge_id
                        break
                else:
                    return None

            collection = self.db.collection(collection_name)
            document = collection.get(key)

            if document:
                edge_type = collection_name.replace('edges_', '')
                properties = {
                    k: v
                    for k, v in document.items() if k not in [
                        '_key', '_id', '_rev', '_from', '_to', 'label',
                        'created_at', 'updated_at'
                    ]
                }

                return Edge(id=document['_key'],
                            source_id=document['_from'],
                            target_id=document['_to'],
                            label=document.get('label', ''),
                            properties=properties,
                            type=edge_type)

            return None

        except ArangoError as e:
            logger.error(f"Error getting edge from ArangoDB: {e}")
            return None

    async def query_nodes(self,
                          label: Optional[str] = None,
                          properties: Optional[Dict[str, Any]] = None,
                          limit: int = 100) -> List[Node]:
        """Query nodes by label and/or properties in ArangoDB"""
        try:
            # This is a simplified implementation
            # In a real implementation, you would use AQL queries
            collections = [
                col for col in self.db.collections()
                if col['name'].startswith('nodes_')
            ]
            results = []

            for col_info in collections:
                collection = self.db.collection(col_info['name'])
                node_type = col_info['name'].replace('nodes_', '')

                # Build filter conditions
                filters = []
                if label:
                    filters.append(f"doc.label == '{label}'")
                if properties:
                    for key, value in properties.items():
                        filters.append(f"doc.{key} == {repr(value)}")

                # Build AQL query
                filter_str = " AND ".join(filters) if filters else "true"
                query = f"""
                FOR doc IN {collection.name}
                FILTER {filter_str}
                LIMIT {limit}
                RETURN doc
                """

                cursor = self.db.aql.execute(query)
                for doc in cursor:
                    doc_properties = {
                        k: v
                        for k, v in doc.items() if k not in [
                            '_key', '_id', '_rev', 'label', 'created_at',
                            'updated_at'
                        ]
                    }

                    results.append(
                        Node(id=doc['_key'],
                             label=doc.get('label', ''),
                             properties=doc_properties,
                             type=node_type))

            return results

        except ArangoError as e:
            logger.error(f"Error querying nodes in ArangoDB: {e}")
            return []

    async def query_edges(self,
                          label: Optional[str] = None,
                          properties: Optional[Dict[str, Any]] = None,
                          limit: int = 100) -> List[Edge]:
        """Query edges by label and/or properties in ArangoDB"""
        try:
            # This is a simplified implementation
            collections = [
                col for col in self.db.collections()
                if col['name'].startswith('edges_')
            ]
            results = []

            for col_info in collections:
                collection = self.db.collection(col_info['name'])
                edge_type = col_info['name'].replace('edges_', '')

                # Build filter conditions
                filters = []
                if label:
                    filters.append(f"doc.label == '{label}'")
                if properties:
                    for key, value in properties.items():
                        filters.append(f"doc.{key} == {repr(value)}")

                # Build AQL query
                filter_str = " AND ".join(filters) if filters else "true"
                query = f"""
                FOR doc IN {collection.name}
                FILTER {filter_str}
                LIMIT {limit}
                RETURN doc
                """

                cursor = self.db.aql.execute(query)
                for doc in cursor:
                    doc_properties = {
                        k: v
                        for k, v in doc.items() if k not in [
                            '_key', '_id', '_rev', '_from', '_to', 'label',
                            'created_at', 'updated_at'
                        ]
                    }

                    results.append(
                        Edge(id=doc['_key'],
                             source_id=doc['_from'],
                             target_id=doc['_to'],
                             label=doc.get('label', ''),
                             properties=doc_properties,
                             type=edge_type))

            return results

        except ArangoError as e:
            logger.error(f"Error querying edges in ArangoDB: {e}")
            return []

    async def traverse(
            self,
            start_node_id: str,
            min_depth: int = 1,
            max_depth: int = 3,
            direction: str = "any",
            edge_labels: Optional[List[str]] = None) -> GraphQueryResult:
        """Traverse the graph from a starting node in ArangoDB"""
        try:
            # Build AQL query for traversal
            edge_filter = ""
            if edge_labels:
                edge_labels_str = ", ".join([f"'{l}'" for l in edge_labels])
                edge_filter = f"FILTER edge.label IN [{edge_labels_str}]"

            direction_map = {
                "outbound": "OUTBOUND",
                "inbound": "INBOUND",
                "any": "ANY"
            }
            aql_direction = direction_map.get(direction, "ANY")

            query = f"""
            FOR vertex, edge, path IN {min_depth}..{max_depth} {aql_direction}
            '{start_node_id}' GRAPH 'knowledge_graph'
            {edge_filter}
            RETURN {{vertex: vertex, edge: edge}}
            """

            start_time = datetime.now()
            cursor = self.db.aql.execute(query)
            execution_time = (datetime.now() - start_time).total_seconds()

            nodes = []
            edges = []

            for result in cursor:
                if 'vertex' in result:
                    vertex = result['vertex']
                    node_type = vertex['_id'].split('/')[0].replace(
                        'nodes_', '')
                    properties = {
                        k: v
                        for k, v in vertex.items() if k not in [
                            '_key', '_id', '_rev', 'label', 'created_at',
                            'updated_at'
                        ]
                    }

                    nodes.append(
                        Node(id=vertex['_key'],
                             label=vertex.get('label', ''),
                             properties=properties,
                             type=node_type))

                if 'edge' in result:
                    edge = result['edge']
                    edge_type = edge['_id'].split('/')[0].replace('edges_', '')
                    properties = {
                        k: v
                        for k, v in edge.items() if k not in [
                            '_key', '_id', '_rev', '_from', '_to', 'label',
                            'created_at', 'updated_at'
                        ]
                    }

                    edges.append(
                        Edge(id=edge['_key'],
                             source_id=edge['_from'],
                             target_id=edge['_to'],
                             label=edge.get('label', ''),
                             properties=properties,
                             type=edge_type))

            return GraphQueryResult(nodes=nodes,
                                    edges=edges,
                                    execution_time=execution_time)

        except ArangoError as e:
            logger.error(f"Error traversing graph in ArangoDB: {e}")
            return GraphQueryResult(nodes=[], edges=[], execution_time=0)

    async def delete_node(self, node_id: str) -> bool:
        """Delete a node and its edges from ArangoDB"""
        try:
            # Node ID format: collection_name/key
            if '/' in node_id:
                collection_name, key = node_id.split('/', 1)
            else:
                # Try to find the node in any collection
                collections = [
                    col for col in self.db.collections()
                    if col['name'].startswith('nodes_')
                ]
                for col_info in collections:
                    collection = self.db.collection(col_info['name'])
                    if collection.has(node_id):
                        collection_name = col_info['name']
                        key = node_id
                        break
                else:
                    return False

            collection = self.db.collection(collection_name)
            collection.delete(key)

            logger.info(f"Deleted node: {node_id}")
            return True

        except ArangoError as e:
            logger.error(f"Error deleting node from ArangoDB: {e}")
            return False

    async def delete_edge(self, edge_id: str) -> bool:
        """Delete an edge from ArangoDB"""
        try:
            # Edge ID format: collection_name/key
            if '/' in edge_id:
                collection_name, key = edge_id.split('/', 1)
            else:
                # Try to find the edge in any collection
                collections = [
                    col for col in self.db.collections()
                    if col['name'].startswith('edges_')
                ]
                for col_info in collections:
                    collection = self.db.collection(col_info['name'])
                    if collection.has(edge_id):
                        collection_name = col_info['name']
                        key = edge_id
                        break
                else:
                    return False

            collection = self.db.collection(collection_name)
            collection.delete(key)

            logger.info(f"Deleted edge: {edge_id}")
            return True

        except ArangoError as e:
            logger.error(f"Error deleting edge from ArangoDB: {e}")
            return False

    async def execute_query(
            self,
            query: str,
            params: Optional[Dict[str, Any]] = None) -> GraphQueryResult:
        """Execute a custom AQL query in ArangoDB"""
        try:
            start_time = datetime.now()
            cursor = self.db.aql.execute(query, bind_vars=params or {})
            execution_time = (datetime.now() - start_time).total_seconds()

            nodes = []
            edges = []

            for result in cursor:
                # This is a simplified implementation
                # In a real implementation, you would parse the result based on the query
                if '_id' in result and result['_id'].startswith('nodes_'):
                    node_type = result['_id'].split('/')[0].replace(
                        'nodes_', '')
                    properties = {
                        k: v
                        for k, v in result.items() if k not in [
                            '_key', '_id', '_rev', 'label', 'created_at',
                            'updated_at'
                        ]
                    }

                    nodes.append(
                        Node(id=result['_key'],
                             label=result.get('label', ''),
                             properties=properties,
                             type=node_type))
                elif '_id' in result and result['_id'].startswith('edges_'):
                    edge_type = result['_id'].split('/')[0].replace(
                        'edges_', '')
                    properties = {
                        k: v
                        for k, v in result.items() if k not in [
                            '_key', '_id', '_rev', '_from', '_to', 'label',
                            'created_at', 'updated_at'
                        ]
                    }

                    edges.append(
                        Edge(id=result['_key'],
                             source_id=result['_from'],
                             target_id=result['_to'],
                             label=result.get('label', ''),
                             properties=properties,
                             type=edge_type))

            return GraphQueryResult(nodes=nodes,
                                    edges=edges,
                                    execution_time=execution_time)

        except ArangoError as e:
            logger.error(f"Error executing AQL query in ArangoDB: {e}")
            return GraphQueryResult(nodes=[], edges=[], execution_time=0)
[?2004hroot@6d3fd6048c5d:/app# \[Kcat src/services/graph_db/arangodb.py[5Pcripts/init_graph_db.py[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cpython -m src.scripts.init_graph_db
[?2004l2025-09-24 15:28:23,279 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:28:23,284 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:28:23,284 - INFO - âœ… Successfully connected to ArangoDB
2025-09-24 15:28:23,284 - INFO - Disconnected from ArangoDB
2025-09-24 15:28:23,284 - INFO - Starting graph database initialization...
2025-09-24 15:28:23,287 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:28:23,289 - INFO - Node collection already exists: nodes_paper
2025-09-24 15:28:23,291 - INFO - Node collection already exists: nodes_person
2025-09-24 15:28:23,292 - INFO - Node collection already exists: nodes_organization
2025-09-24 15:28:23,294 - INFO - Node collection already exists: nodes_location
2025-09-24 15:28:23,296 - INFO - Node collection already exists: nodes_concept
2025-09-24 15:28:23,298 - INFO - Node collection already exists: nodes_methodology
2025-09-24 15:28:23,299 - INFO - Edge collection already exists: edges_cites
2025-09-24 15:28:23,301 - INFO - Edge collection already exists: edges_authored_by
2025-09-24 15:28:23,302 - INFO - Edge collection already exists: edges_contains
2025-09-24 15:28:23,304 - INFO - Edge collection already exists: edges_related_to
2025-09-24 15:28:23,306 - INFO - Edge collection already exists: edges_belongs_to
2025-09-24 15:28:23,307 - INFO - Edge collection already exists: edges_located_at
2025-09-24 15:28:23,309 - INFO - Edge collection already exists: edges_uses
2025-09-24 15:28:23,310 - INFO - Graph already exists: knowledge_graph
/app/src/scripts/init_graph_db.py:228: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:28:23,314 - INFO - Created index on nodes_organization for fields: ['label']
2025-09-24 15:28:23,317 - INFO - Created index on nodes_organization for fields: ['type']
2025-09-24 15:28:23,321 - INFO - Created index on nodes_organization for fields: ['created_at']
2025-09-24 15:28:23,324 - INFO - Created index on nodes_organization for fields: ['owner_id']
2025-09-24 15:28:23,327 - INFO - Created index on nodes_paper for fields: ['label']
2025-09-24 15:28:23,329 - INFO - Created index on nodes_paper for fields: ['type']
2025-09-24 15:28:23,331 - INFO - Created index on nodes_paper for fields: ['created_at']
2025-09-24 15:28:23,333 - INFO - Created index on nodes_paper for fields: ['owner_id']
2025-09-24 15:28:23,335 - INFO - Created index on nodes_person for fields: ['label']
2025-09-24 15:28:23,337 - INFO - Created index on nodes_person for fields: ['type']
2025-09-24 15:28:23,339 - INFO - Created index on nodes_person for fields: ['created_at']
2025-09-24 15:28:23,341 - INFO - Created index on nodes_person for fields: ['owner_id']
2025-09-24 15:28:23,343 - INFO - Created index on nodes_concept for fields: ['label']
2025-09-24 15:28:23,345 - INFO - Created index on nodes_concept for fields: ['type']
2025-09-24 15:28:23,347 - INFO - Created index on nodes_concept for fields: ['created_at']
2025-09-24 15:28:23,349 - INFO - Created index on nodes_concept for fields: ['owner_id']
2025-09-24 15:28:23,351 - INFO - Created index on nodes_methodology for fields: ['label']
2025-09-24 15:28:23,353 - INFO - Created index on nodes_methodology for fields: ['type']
2025-09-24 15:28:23,357 - INFO - Created index on nodes_methodology for fields: ['created_at']
2025-09-24 15:28:23,362 - INFO - Created index on nodes_methodology for fields: ['owner_id']
2025-09-24 15:28:23,365 - INFO - Created index on nodes_location for fields: ['label']
2025-09-24 15:28:23,367 - INFO - Created index on nodes_location for fields: ['type']
2025-09-24 15:28:23,369 - INFO - Created index on nodes_location for fields: ['created_at']
2025-09-24 15:28:23,371 - INFO - Created index on nodes_location for fields: ['owner_id']
/app/src/scripts/init_graph_db.py:248: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:28:23,376 - INFO - Created index on edges_belongs_to for fields: ['label']
2025-09-24 15:28:23,378 - INFO - Created index on edges_belongs_to for fields: ['type']
2025-09-24 15:28:23,380 - INFO - Created index on edges_belongs_to for fields: ['created_at']
2025-09-24 15:28:23,382 - INFO - Created index on edges_belongs_to for fields: ['owner_id']
2025-09-24 15:28:23,384 - INFO - Created index on edges_uses for fields: ['label']
2025-09-24 15:28:23,386 - INFO - Created index on edges_uses for fields: ['type']
2025-09-24 15:28:23,388 - INFO - Created index on edges_uses for fields: ['created_at']
2025-09-24 15:28:23,390 - INFO - Created index on edges_uses for fields: ['owner_id']
2025-09-24 15:28:23,396 - INFO - Created index on edges_authored_by for fields: ['label']
2025-09-24 15:28:23,398 - INFO - Created index on edges_authored_by for fields: ['type']
2025-09-24 15:28:23,400 - INFO - Created index on edges_authored_by for fields: ['created_at']
2025-09-24 15:28:23,402 - INFO - Created index on edges_authored_by for fields: ['owner_id']
2025-09-24 15:28:23,404 - INFO - Created index on edges_cites for fields: ['label']
2025-09-24 15:28:23,406 - INFO - Created index on edges_cites for fields: ['type']
2025-09-24 15:28:23,408 - INFO - Created index on edges_cites for fields: ['created_at']
2025-09-24 15:28:23,410 - INFO - Created index on edges_cites for fields: ['owner_id']
2025-09-24 15:28:23,412 - INFO - Created index on edges_related_to for fields: ['label']
2025-09-24 15:28:23,414 - INFO - Created index on edges_related_to for fields: ['type']
2025-09-24 15:28:23,415 - INFO - Created index on edges_related_to for fields: ['created_at']
2025-09-24 15:28:23,417 - INFO - Created index on edges_related_to for fields: ['owner_id']
2025-09-24 15:28:23,419 - INFO - Created index on edges_contains for fields: ['label']
2025-09-24 15:28:23,421 - INFO - Created index on edges_contains for fields: ['type']
2025-09-24 15:28:23,423 - INFO - Created index on edges_contains for fields: ['created_at']
2025-09-24 15:28:23,425 - INFO - Created index on edges_contains for fields: ['owner_id']
2025-09-24 15:28:23,427 - INFO - Created index on edges_located_at for fields: ['label']
2025-09-24 15:28:23,430 - INFO - Created index on edges_located_at for fields: ['type']
2025-09-24 15:28:23,432 - INFO - Created index on edges_located_at for fields: ['created_at']
2025-09-24 15:28:23,434 - INFO - Created index on edges_located_at for fields: ['owner_id']
2025-09-24 15:28:23,434 - INFO - Graph database initialization completed successfully
2025-09-24 15:28:23,434 - INFO - Disconnected from ArangoDB
2025-09-24 15:28:23,434 - INFO - ðŸŽ‰ Graph database initialization completed successfully!
[?2004hroot@6d3fd6048c5d:/app# python
[?2004lPython 3.9.23 (main, Sep  8 2025, 21:40:14) 
[GCC 14.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> from src.config import settings
>>> sys_db = s[K[K[K[K[K[K[K[K[K[Kclient = A[C[C[C[C[Kfrom arango import ArangoClient
>>> from arango.exceptions import ArangoError
>>> cliet[Knt = ArangoClient(h[Ksettings.arangodb_host)
>>> cloie[K[K[Kient
<ArangoClient http://arangodb:8529>
>>> sys_db = s[Kcle[Kient.db(name = '_system', useran[K[Kbn[K[Kname = settt[Kings.
settings.Config(                      settings.model_post_init(
settings.arangodb_database            settings.model_rebuild(
settings.arangodb_host                settings.model_validate(
settings.arangodb_password            settings.model_validate_json(
settings.arangodb_username            settings.model_validate_strings(
settings.construct(                   settings.ner_extraction_method
settings.copy(                        settings.parse_file(
settings.dict(                        settings.parse_obj(
settings.embedding_dimension          settings.parse_raw(
settings.embedding_type               settings.pdf_ocr_language
settings.from_orm(                    settings.pdf_use_ocr
settings.gcp_project_id               settings.pinecone_api_key
settings.gcp_region                   settings.pinecone_environment
settings.gcs_bucket_name              settings.pinecone_index_name
settings.json(                        settings.redis_host
settings.local_embedding_model        settings.redis_port
settings.matching_engine_batch_size   settings.schema(
settings.matching_engine_rps_limit    settings.schema_json(
settings.model_computed_fields        settings.secret_key
settings.model_config                 settings.settings_customise_sources(
settings.model_construct(             settings.update_forward_refs(
settings.model_copy(                  settings.validate(
settings.model_dump(                  settings.vector_db_type
settings.model_dump_json(             settings.vertex_ai_embedding_model
settings.model_extra                  settings.vertex_ai_index_endpoint_id
settings.model_fields                 settings.vertex_ai_index_id
settings.model_fields_set             settings.vertex_ai_index_region
--More--[Ksettings.model_json_schema(           settings.vertex_ai_llm_model
settings.model_parametrized_name(     
>>> sys_db = client.db(name = '_system', username = settings.
settings.Config(                      settings.model_post_init(
settings.arangodb_database            settings.model_rebuild(
settings.arangodb_host                settings.model_validate(
settings.arangodb_password            settings.model_validate_json(
settings.arangodb_username            settings.model_validate_strings(
settings.construct(                   settings.ner_extraction_method
settings.copy(                        settings.parse_file(
settings.dict(                        settings.parse_obj(
settings.embedding_dimension          settings.parse_raw(
settings.embedding_type               settings.pdf_ocr_language
settings.from_orm(                    settings.pdf_use_ocr
settings.gcp_project_id               settings.pinecone_api_key
settings.gcp_region                   settings.pinecone_environment
settings.gcs_bucket_name              settings.pinecone_index_name
settings.json(                        settings.redis_host
settings.local_embedding_model        settings.redis_port
settings.matching_engine_batch_size   settings.schema(
settings.matching_engine_rps_limit    settings.schema_json(
settings.model_computed_fields        settings.secret_key
settings.model_config                 settings.settings_customise_sources(
settings.model_construct(             settings.update_forward_refs(
settings.model_copy(                  settings.validate(
settings.model_dump(                  settings.vector_db_type
settings.model_dump_json(             settings.vertex_ai_embedding_model
settings.model_extra                  settings.vertex_ai_index_endpoint_id
settings.model_fields                 settings.vertex_ai_index_id
settings.model_fields_set             settings.vertex_ai_index_region
--More--[Ksettings.model_json_schema(           settings.vertex_ai_llm_model
settings.model_parametrized_name(     
>>> sys_db = client.db(name = '_system', username = settings.update_forward_refs([K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[Kusername, password= settings.p assword)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python3.9/site-packages/pydantic/main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'username'
>>> settings.update_forward_refs([K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[Ksys_db = client.db(name = '_system', username = settings.username, password= settings.password)[1P)[1P)[1P)[1P)[1P)[1P)[1P)[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C) [K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cs).)a)r)a)[1P)[1P)[1P)[1P)[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C) [K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cs).)a)r)a)n)[A)[K
[K[A[C[C[C[Cs)e)t)[C[Ktings.arangodb_username
'root'
>>> settings.arangodb_username[C[C[C[C[Cys_db = client.db(name = '_system', username = settings.username, password= settings.password)[K[K[K[K[K[K[K[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K=settings.arangodb_username, passo[Kword='[Kse t[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Ksettings.arangodb_username[K[K[K[K[K[K[K[Kpassword)
  File "<stdin>", line 1
    sys_db = client.db(name = '_system', username ==settings.arangodb_username, password=settings.arangodb_password)
                                                                                                                   ^
SyntaxError: positional argument follows keyword argument
>>> sys_db = client.db(name = '_system', username ==settings.arangodb_username, password=settings.arangodb_password)[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C

KeyboardInterrupt
>>> 
KeyboardInterrupt
>>> sys_db = client.db(name = '_system', username ==settings.arangodb_username, password=settings.arangodb_password)[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Csettings.arangodb_username, password=sett[1Pings.arangodb_password)[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C

>>> 
KeyboardInterrupt
>>> 
KeyboardInterrupt
>>> 
KeyboardInterrupt
>>> 
KeyboardInterrupt
>>> sys_de[Kb = cl
class         classmethod(  client        
>>> sys_db = cl
class         classmethod(  client        
>>> sys_db = cl
class         classmethod(  client        
>>> sys_db = client.db(name = '[K[K[K[K='_system', \
... usernn[Kame = [K[K[K=settings.arangodb_username, \
... password=settings.arangodb_username[K[K[K[K[K[K[K[Kpassword)
>>> sys_db
<StandardDatabase _system>
>>> ss[Kys_db.has_database(settings.arangodb_database)
True
>>> settings.arangodb_database
'_system'
>>> settings.arangodb_database[C[C[C[C[Cys_db.has_database(settings.arangodb_database)[C[C[C[C[C[C[C[C[C[C[K[C[C[C[C[Ksys_db[K[K[K[K[K[Ksys_db[K[K[K[K[K[Kfrom src.config import settings
>>> settings
Settings(gcp_project_id='', gcp_region='us-central1', gcs_bucket_name='', vertex_ai_index_id='', vertex_ai_index_endpoint_id='', arangodb_host='http://arangodb:8529', arangodb_username='root', arangodb_password='my-secret-password', arangodb_database='_system', vertex_ai_llm_model='text-bison@001', redis_host='', redis_port=6379, secret_key='', embedding_type='local', local_embedding_model='all-MiniLM-L6-v2', vertex_ai_embedding_model='textembedding-gecko@001', embedding_dimension=384, vector_db_type='vertex_ai_matching_engine', vertex_ai_index_region='', matching_engine_batch_size=100, matching_engine_rps_limit=10, pinecone_api_key='', pinecone_environment='', pinecone_index_name='', ner_extraction_method='spacy', pdf_use_ocr=False, pdf_ocr_language='eng')
>>> settings[K[C[C[C[Cfrom src.config import settings
>>> from src.config import settings[C[C[C[Csetting[K[C[C[C[Cfrom src.config import settings[C[C[C[Csetting[K[C[C[C[Cfrom src.config import settings
>>> from src.config import settings[C[C[C[Csetting[K[C[C[C[Cfrom src.config import settings[C[C[C[C[5Psettings.arangodb_database
'_system'
>>> 
[?2004hroot@6d3fd6048c5d:/app# python
[?2004lPython 3.9.23 (main, Sep  8 2025, 21:40:14) 
[GCC 14.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> settings.arangodb_database[C[C[C[Cfrom src.config import settings
>>> from src.config import settings[C[C[C[C[5Psettings.arangodb_database
'_system'
>>> settings.arangodb_username
'root'
>>> settings.arangodb_username
'root'
>>> settings.arangodb_usernamedatabase[C[C[C[Cfrom src.config import settings
>>> from src.config import settings[C[C[C[C[5Psettings.arangodb_usernamedatabaseusername
'root'
>>> 
[?2004hroot@6d3fd6048c5d:/app# python
[?2004lPython 3.9.23 (main, Sep  8 2025, 21:40:14) 
[GCC 14.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> settings.arangodb_username[C[C[C[Cfrom src.config import settings
>>> from src.config import settings[C[C[C[C[5Psettings.arangodb_username
'root'
>>> 
[?2004hroot@6d3fd6048c5d:/app# l
[?2004lbash: l: command not found
[?2004hroot@6d3fd6048c5d:/app# ca[K[Kls
[?2004lDockerfile	      README.md		   infrastructure	  scripts
Dockerfile.notebook   README.md~	   notebooks		  src
Dockerfile.notebook~  docker		   requirements-dev.txt   terraform.tfvars.example
Dockerfile.test       docker-compose.yml   requirements-dev.txt~  test_samples
Dockerfile.test~      docker-compose.yml~  requirements.txt	  tests
Dockerfile~	      docs		   requirements.txt~	  typescript
[?2004hroot@6d3fd6048c5d:/app# cat .enb[Kv
[?2004l# .env file

# Required to pass Pydantic validation in src/config.py
GCP_PROJECT_ID=
GCS_BUCKET_NAME=
VERTEX_AI_INDEX_ID=
VERTEX_AI_INDEX_ENDPOINT_ID=

# ARANGODB_HOST=
# ARANGODB_USERNAME=
# ARANGODB_PASSWORD=
# ARANGODB_DATABASE=
  

REDIS_HOST=
SECRET_KEY=
VERTEX_AI_INDEX_REGION=

# Specifies that the EmbeddingGeneratorFactory should use the local generator
EMBEDDING_TYPE=local

# The model name for the LocalEmbeddingGenerator
LOCAL_EMBEDDING_MODEL=all-MiniLM-L6-v2

# NER_EXTRACTION_METHOD=llm

# ... other Vertex AI configs


# ArangoDB
ARANGODB_HOST=http://localhost:8529
ARANGODB_USERNAME=pingu
ARANGODB_PASSWORD=my-secret-password
ARANGODB_DATABASE=test_graph_db


# ARANGODB_HOST=your_arangodb_host
# ARANGODB_USERNAME=your_username  
# ARANGODB_PASSWORD=your_password
# ARANGODB_DATABASE=your_database[?2004hroot@6d3fd6048c5d:/app# cat .envpyt[K[Kpython
[?2004lPython 3.9.23 (main, Sep  8 2025, 21:40:14) 
[GCC 14.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> settings.arangodb_username[C[C[C[Cfrom src.config import settings
>>> from src.config import settings[C[C[C[C[5Psettings.arangodb_username
'root'
>>> settings.arangodb_username
'root'
>>> settings.arangodb_username
'root'
>>> settings.arangodb_username
'root'
>>> settings.arangodb_username[K[K[K[K[K[K[K[Khost
'http://arangodb:8529'
>>> settings
Settings(gcp_project_id='', gcp_region='us-central1', gcs_bucket_name='', vertex_ai_index_id='', vertex_ai_index_endpoint_id='', arangodb_host='http://arangodb:8529', arangodb_username='root', arangodb_password='my-secret-password', arangodb_database='_system', vertex_ai_llm_model='text-bison@001', redis_host='', redis_port=6379, secret_key='', embedding_type='local', local_embedding_model='all-MiniLM-L6-v2', vertex_ai_embedding_model='textembedding-gecko@001', embedding_dimension=384, vector_db_type='vertex_ai_matching_engine', vertex_ai_index_region='', matching_engine_batch_size=100, matching_engine_rps_limit=10, pinecone_api_key='', pinecone_environment='', pinecone_index_name='', ner_extraction_method='spacy', pdf_use_ocr=False, pdf_ocr_language='eng')
>>> 
[?2004hroot@6d3fd6048c5d:/app# [?2004l
exit
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hdocker run --rm \
    --network "$NETWORK_NAME" \[K
    -v "$APP_DIR":/app \[K
    -w /app \[K
    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \[K
    -e ARANGODB_USERNAME="root" \[K
    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[K
    -e ARANGODB_DATABASE="_system" \[K
    -it "$TESTER_IMAGE" /bin/bash[K
[K[9A[43C[?2004l[9B[K[9A[43C[9B
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;31mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004h[7mdocker run --rm \[27m
[7m    --network "$NETWORK_NAME" \[27m[K
[7m    -v "$APP_DIR":/app \[27m[K
[7m    -w /app \[27m[K[3A[13C[27md[27mo[27mc[27mk[27me[27mr[27m [27mr[27mu[27mn[27m [27m-[27m-[27mr[27mm[27m [27m\[1B[27m [27m [27m [27m [27m-[27m-[27mn[27me[27mt[27mw[27mo[27mr[27mk[27m [27m"[27m$[27mN[27mE[27mT[27mW[27mO[27mR[27mK[27m_[27mN[27mA[27mM[27mE[27m"[27m [27m\[1B[27m [27m [27m [27m [27m-[27mv[27m [27m"[27m$[27mA[27mP[27mP[27m_[27mD[27mI[27mR[27m"[27m:[27m/[27ma[27mp[27mp[27m [27m\[1B[27m [27m [27m [27m [27m-[27mw[27m [27m/[27ma[27mp[27mp[27m [27m\[?1l>[?2004l
[0m[27m[24m[J> [K[?1h=[?2004h[7m-it "$TESTER_IMAGE" /bin/bash[27m[29D[27m-[27mi[27mt[27m [27m"[27m$[27mT[27mE[27mS[27mT[27mE[27mR[27m_[27mI[27mM[27mA[27mG[27mE[27m"[27m [27m/[27mb[27mi[27mn[27m/[27mb[27ma[27ms[27mh[?1l>[?2004l
]2;docker run --rm --network "$NETWORK_NAME" -v "$APP_DIR":/app -w /app -it  ]1;docker[?2004hroot@a71cd1de0afc:/app# python
[?2004lPython 3.9.23 (main, Sep  8 2025, 21:40:14) 
[GCC 14.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> p[Kfrom src.se[K[K[K[K[K[Ksrc.conn[Kfig imm[Kport settings
>>> settings
Settings(gcp_project_id='', gcp_region='us-central1', gcs_bucket_name='', vertex_ai_index_id='', vertex_ai_index_endpoint_id='', arangodb_host='http://localhost:8529', arangodb_username='pingu', arangodb_password='my-secret-password', arangodb_database='test_graph_db', vertex_ai_llm_model='text-bison@001', redis_host='', redis_port=6379, secret_key='', embedding_type='local', local_embedding_model='all-MiniLM-L6-v2', vertex_ai_embedding_model='textembedding-gecko@001', embedding_dimension=384, vector_db_type='vertex_ai_matching_engine', vertex_ai_index_region='', matching_engine_batch_size=100, matching_engine_rps_limit=10, pinecone_api_key='', pinecone_environment='', pinecone_index_name='', ner_extraction_method='spacy', pdf_use_ocr=False, pdf_ocr_language='eng')
>>> 
[?2004hroot@a71cd1de0afc:/app# python -m src/[K/scripts/init_graph_db.py[C[1Pinit_graph_db.py.init_graph_db.py[1Pscripts.init_graph_db.py.scripts.init_graph_db.py
[?2004l/usr/local/bin/python: Error while finding module specification for 'src.scripts.init_graph_db.py' (ModuleNotFoundError: __path__ attribute not found on 'src.scripts.init_graph_db' while trying to find 'src.scripts.init_graph_db.py'). Try using 'src.scripts.init_graph_db' instead of 'src.scripts.init_graph_db.py' as the module name.
[?2004hroot@a71cd1de0afc:/app# ls
[?2004lDockerfile	      README.md		   infrastructure	  scripts
Dockerfile.notebook   README.md~	   notebooks		  src
Dockerfile.notebook~  docker		   requirements-dev.txt   terraform.tfvars.example
Dockerfile.test       docker-compose.yml   requirements-dev.txt~  test_samples
Dockerfile.test~      docker-compose.yml~  requirements.txt	  tests
Dockerfile~	      docs		   requirements.txt~	  typescript
[?2004hroot@a71cd1de0afc:/app# pw
[?2004lbash: pw: command not found
[?2004hroot@a71cd1de0afc:/app# [H[2Jroot@a71cd1de0afc:/app# ls -l
[?2004ltotal 316
-rw-r--r--  1 root root      0 Sep 17 00:35 Dockerfile
-rw-r--r--  1 root root    684 Sep 23 12:04 Dockerfile.notebook
-rw-r--r--  1 root root    680 Sep 23 12:02 Dockerfile.notebook~
-rw-r--r--  1 root root    821 Sep 23 10:47 Dockerfile.test
-rw-r--r--  1 root root    801 Sep 17 02:51 Dockerfile.test~
-rw-r--r--  1 root root    454 Sep 16 15:15 Dockerfile~
-rw-r--r--  1 root root  12174 Sep 17 15:19 README.md
-rw-r--r--  1 root root      0 Sep 16 15:11 README.md~
drwxr-xr-x  5 root root    160 Sep 16 15:11 docker
-rw-r--r--  1 root root   1026 Sep 24 14:13 docker-compose.yml
-rw-r--r--  1 root root    592 Sep 23 12:12 docker-compose.yml~
drwxr-xr-x 17 root root    544 Sep 24 15:46 docs
drwxr-xr-x  8 root root    256 Sep 24 12:27 infrastructure
drwxr-xr-x  4 root root    128 Sep 23 14:34 notebooks
-rw-r--r--  1 root root     94 Sep 16 22:47 requirements-dev.txt
-rw-r--r--  1 root root     74 Sep 16 15:13 requirements-dev.txt~
-rw-r--r--  1 root root    426 Sep 23 10:46 requirements.txt
-rw-r--r--  1 root root    377 Sep 17 14:52 requirements.txt~
drwxr-xr-x 11 root root    352 Sep 24 14:56 scripts
drwxr-xr-x 16 root root    512 Sep 24 15:03 src
-rw-r--r--  1 root root      0 Sep 16 15:11 terraform.tfvars.example
drwxr-xr-x  4 root root    128 Sep 23 11:19 test_samples
drwxr-xr-x  7 root root    224 Sep 23 11:09 tests
-rw-r--r--  1 root root 204041 Sep 24 15:47 typescript
[?2004hroot@a71cd1de0afc:/app# s[Kls --color
[?2004lDockerfile            README.md            [0m[01;34minfrastructure[0m         [01;34mscripts[0m
Dockerfile.notebook   README.md~           [01;34mnotebooks[0m              [01;34msrc[0m
Dockerfile.notebook~  [01;34mdocker[0m               requirements-dev.txt   terraform.tfvars.example
Dockerfile.test       docker-compose.yml   requirements-dev.txt~  [01;34mtest_samples[0m
Dockerfile.test~      docker-compose.yml~  requirements.txt       [01;34mtests[0m
Dockerfile~           [01;34mdocs[0m                 requirements.txt~      typescript
[?2004hroot@a71cd1de0afc:/app# ls --color -ls
[?2004ltotal 316
  0 -rw-r--r--  1 root root      0 Sep 17 00:35 Dockerfile
  4 -rw-r--r--  1 root root    684 Sep 23 12:04 Dockerfile.notebook
  4 -rw-r--r--  1 root root    680 Sep 23 12:02 Dockerfile.notebook~
  4 -rw-r--r--  1 root root    821 Sep 23 10:47 Dockerfile.test
  4 -rw-r--r--  1 root root    801 Sep 17 02:51 Dockerfile.test~
  4 -rw-r--r--  1 root root    454 Sep 16 15:15 Dockerfile~
 12 -rw-r--r--  1 root root  12174 Sep 17 15:19 README.md
  0 -rw-r--r--  1 root root      0 Sep 16 15:11 README.md~
  0 drwxr-xr-x  5 root root    160 Sep 16 15:11 [0m[01;34mdocker[0m
  4 -rw-r--r--  1 root root   1026 Sep 24 14:13 docker-compose.yml
  4 -rw-r--r--  1 root root    592 Sep 23 12:12 docker-compose.yml~
  0 drwxr-xr-x 17 root root    544 Sep 24 15:46 [01;34mdocs[0m
  0 drwxr-xr-x  8 root root    256 Sep 24 12:27 [01;34minfrastructure[0m
  0 drwxr-xr-x  4 root root    128 Sep 23 14:34 [01;34mnotebooks[0m
  4 -rw-r--r--  1 root root     94 Sep 16 22:47 requirements-dev.txt
  4 -rw-r--r--  1 root root     74 Sep 16 15:13 requirements-dev.txt~
  4 -rw-r--r--  1 root root    426 Sep 23 10:46 requirements.txt
  4 -rw-r--r--  1 root root    377 Sep 17 14:52 requirements.txt~
  0 drwxr-xr-x 11 root root    352 Sep 24 14:56 [01;34mscripts[0m
  0 drwxr-xr-x 16 root root    512 Sep 24 15:03 [01;34msrc[0m
  0 -rw-r--r--  1 root root      0 Sep 16 15:11 terraform.tfvars.example
  0 drwxr-xr-x  4 root root    128 Sep 23 11:19 [01;34mtest_samples[0m
  0 drwxr-xr-x  7 root root    224 Sep 23 11:09 [01;34mtests[0m
260 -rw-r--r--  1 root root 204041 Sep 24 15:47 typescript
[?2004hroot@a71cd1de0afc:/app# ls --color -ls src
[?2004ltotal 16
0 drwxr-xr-x  3 root root   96 Sep 24 15:04 [0m[01;34m__pycache__[0m
0 drwxr-xr-x 11 root root  352 Sep 23 11:34 [01;34mapi[0m
4 -rw-r--r--  1 root root 3493 Sep 24 15:03 config.py
4 -rw-r--r--  1 root root 3423 Sep 23 10:48 config.py~
4 -rw-r--r--  1 root root  966 Sep 16 15:18 main.py
0 -rw-r--r--  1 root root    0 Sep 16 15:11 main.py~
0 drwxr-xr-x 10 root root  320 Sep 17 15:06 [01;34mmodels[0m
0 drwxr-xr-x 12 root root  384 Sep 23 14:07 [01;34mprocessing[0m
0 drwxr-xr-x  8 root root  256 Sep 24 15:02 [01;34mscripts[0m
0 drwxr-xr-x 19 root root  608 Sep 24 12:10 [01;34mservices[0m
4 -rw-r--r--  1 root root 2541 Sep 24 13:48 typescript
0 drwxr-xr-x 11 root root  352 Sep 24 12:09 [01;34mutils[0m
[?2004hroot@a71cd1de0afc:/app# ls --color -ls src/scripts/
[?2004ltotal 12
 0 drwxr-xr-x 3 root root    96 Sep 24 15:00 [0m[01;34m__pycache__[0m
 0 -rw-r--r-- 1 root root     0 Sep 16 15:11 backup_vectors.py
12 -rw-r--r-- 1 root root 10809 Sep 24 13:51 init_graph_db.py
 0 -rw-r--r-- 1 root root     0 Sep 16 15:11 init_graph_db.py~
 0 -rw-r--r-- 1 root root     0 Sep 16 15:11 migrate_data.py
[?2004hroot@a71cd1de0afc:/app# ls --color -ls src/scripts/[K[K[Kl[K[3Ppwlspython -m src.scripts.init_graph_db.py[K[K[K
[?2004l2025-09-24 15:48:10,638 - INFO - Initialized ArangoDB service with host: http://localhost:8529
2025-09-24 15:48:10,638 - INFO - Connected to ArangoDB database: test_graph_db
2025-09-24 15:48:10,638 - INFO - âœ… Successfully connected to ArangoDB
2025-09-24 15:48:10,638 - INFO - Disconnected from ArangoDB
2025-09-24 15:48:10,639 - INFO - Starting graph database initialization...
2025-09-24 15:48:10,639 - INFO - Connected to ArangoDB database: test_graph_db
2025-09-24 15:48:10,643 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352c130>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:12,647 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352c340>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:16,655 - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352c430>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:16,661 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352c9a0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:18,662 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352caf0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:22,670 - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352cca0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:22,675 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e354a250>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:24,679 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e354a3a0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:28,681 - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e3585760>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:28,684 - ERROR - Error creating node collection nodes_paper: Can't connect to host(s) within limit (3)
2025-09-24 15:48:28,686 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352cf40>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:30,690 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352cc10>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:34,697 - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352c970>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:34,702 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352c550>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:36,706 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e352c400>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:40,714 - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e354a580>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
2025-09-24 15:48:40,719 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f20e354aaf0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/test_graph_db/_api/collection
^C2025-09-24 15:48:42,315 - INFO - Disconnected from ArangoDB
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f20e354ac40>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 634, in run_until_complete
    self.run_forever()
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 601, in run_forever
    self._run_once()
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 1905, in _run_once
    handle._run()
  File "/usr/local/lib/python3.9/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/app/src/scripts/init_graph_db.py", line 285, in main
    success = await initializer.initialize()
  File "/app/src/scripts/init_graph_db.py", line 40, in initialize
    await self._create_node_collections()
  File "/app/src/scripts/init_graph_db.py", line 71, in _create_node_collections
    col for col in self.graph_db.db.collections()
  File "/usr/local/lib/python3.9/site-packages/arango/database.py", line 1455, in collections
    return self._execute(request, response_handler)
  File "/usr/local/lib/python3.9/site-packages/arango/api.py", line 74, in _execute
    return self._executor.execute(request, response_handler)
  File "/usr/local/lib/python3.9/site-packages/arango/executor.py", line 66, in execute
    resp = self._conn.send_request(request)
  File "/usr/local/lib/python3.9/site-packages/arango/connection.py", line 323, in send_request
    return self.process_request(host_index, request, auth=self._auth)
  File "/usr/local/lib/python3.9/site-packages/arango/connection.py", line 169, in process_request
    resp = self._http.send_request(
  File "/usr/local/lib/python3.9/site-packages/arango/http.py", line 230, in send_request
    response = session.request(
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 644, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 871, in urlopen
    return self.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 844, in urlopen
    retries.sleep()
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 363, in sleep
    self._sleep_backoff()
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 347, in _sleep_backoff
    time.sleep(backoff)
KeyboardInterrupt

[?2004hroot@a71cd1de0afc:/app# python -m src.scripts.init_graph_db
[?2004l2025-09-24 15:49:02,297 - INFO - Initialized ArangoDB service with host: http://localhost:8529
2025-09-24 15:49:02,300 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f97b41a1ee0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:49:04,304 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f97b414c130>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:49:08,312 - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f97b414c220>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:49:08,317 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f97b414c790>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
^CTraceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f97b414c8e0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 634, in run_until_complete
    self.run_forever()
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 601, in run_forever
    self._run_once()
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 1905, in _run_once
    handle._run()
  File "/usr/local/lib/python3.9/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/app/src/scripts/init_graph_db.py", line 281, in main
    if not await initializer.check_connection():
  File "/app/src/scripts/init_graph_db.py", line 264, in check_connection
    if await self.graph_db.connect():
  File "/app/src/services/graph_db/arangodb.py", line 39, in connect
    if not sys_db.has_database(self.database_name):
  File "/usr/local/lib/python3.9/site-packages/arango/database.py", line 1294, in has_database
    return self._execute(request, response_handler)
  File "/usr/local/lib/python3.9/site-packages/arango/api.py", line 74, in _execute
    return self._executor.execute(request, response_handler)
  File "/usr/local/lib/python3.9/site-packages/arango/executor.py", line 66, in execute
    resp = self._conn.send_request(request)
  File "/usr/local/lib/python3.9/site-packages/arango/connection.py", line 323, in send_request
    return self.process_request(host_index, request, auth=self._auth)
  File "/usr/local/lib/python3.9/site-packages/arango/connection.py", line 169, in process_request
    resp = self._http.send_request(
  File "/usr/local/lib/python3.9/site-packages/arango/http.py", line 230, in send_request
    response = session.request(
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 644, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 871, in urlopen
    return self.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 844, in urlopen
    retries.sleep()
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 363, in sleep
    self._sleep_backoff()
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 347, in _sleep_backoff
    time.sleep(backoff)
KeyboardInterrupt

[?2004hroot@a71cd1de0afc:/app# python -m src.scripts.init_graph_db
[?2004l2025-09-24 15:49:11,818 - INFO - Initialized ArangoDB service with host: http://localhost:8529
2025-09-24 15:49:11,821 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fc777ad2dc0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:49:13,825 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fc777ad2fd0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:49:17,830 - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fc777a7d100>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:49:17,835 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fc777a7d670>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:49:19,840 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fc777a7d7c0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:49:23,847 - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fc777a7d970>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:49:23,851 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fc777a7dee0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
^CTraceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fc777a8f070>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 634, in run_until_complete
    self.run_forever()
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 601, in run_forever
    self._run_once()
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 1905, in _run_once
    handle._run()
  File "/usr/local/lib/python3.9/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/app/src/scripts/init_graph_db.py", line 281, in main
    if not await initializer.check_connection():
  File "/app/src/scripts/init_graph_db.py", line 264, in check_connection
    if await self.graph_db.connect():
  File "/app/src/services/graph_db/arangodb.py", line 39, in connect
    if not sys_db.has_database(self.database_name):
  File "/usr/local/lib/python3.9/site-packages/arango/database.py", line 1294, in has_database
    return self._execute(request, response_handler)
  File "/usr/local/lib/python3.9/site-packages/arango/api.py", line 74, in _execute
    return self._executor.execute(request, response_handler)
  File "/usr/local/lib/python3.9/site-packages/arango/executor.py", line 66, in execute
    resp = self._conn.send_request(request)
  File "/usr/local/lib/python3.9/site-packages/arango/connection.py", line 323, in send_request
    return self.process_request(host_index, request, auth=self._auth)
  File "/usr/local/lib/python3.9/site-packages/arango/connection.py", line 169, in process_request
    resp = self._http.send_request(
  File "/usr/local/lib/python3.9/site-packages/arango/http.py", line 230, in send_request
    response = session.request(
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 644, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 871, in urlopen
    return self.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 844, in urlopen
    retries.sleep()
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 363, in sleep
    self._sleep_backoff()
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 347, in _sleep_backoff
    time.sleep(backoff)
KeyboardInterrupt

[?2004hroot@a71cd1de0afc:/app# python -m src.scripts.init_graph_db[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K[?2004l
exit
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;31mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hdocker run --rm \
    --network "$NETWORK_NAME" \[K
    -v "$APP_DIR":/app \[K
    -w /app \[K
-it "$TESTER_IMAGE" /bin/bash[K[4A[14C[4B    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \
    -e ARANGODB_USERNAME="root" \[K
    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[K
    -e ARANGODB_DATABASE="_system" \[K
    -it "$TESTER_IMAGE" /bin/bash[K
[K[9A[43C[4B-it "$TESTER_IMAGE" /bin/bash                         [1B[K[1B[K[1B[K[1B[K[1B[K[9A[43C[4B    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \[1B    -e ARANGODB_USERNAME="root" \[K[1B    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[K[1B    -e ARANGODB_DATABASE="_system" \[K[1B    -it "$TESTER_IMAGE" /bin/bash[K[1B[K[9A[43C[17DNETWORK_NAME="app-net"[1BARANGO_CONTAINER="arangodb"    [1BARANGO_ROOT_PASSWORD="my-secret-password"[1BTESTER_IMAGE="research-kg-app-embedding-tester:latest"[1BAPP_DIR="$(pwd)"                                      [1B[K[1B[K[1B[K[1B[K[1B[K[9A[48C[?1l>[?2004l[5B]2;NETWORK_NAME="app-net" ; ARANGO_CONTAINER="arangodb" ; ARANGO_ROOT_PASSWORD= =]1;[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hNETWORK_NAME="app-net"
ARANGO_CONTAINER="arangodb"[K
ARANGO_ROOT_PASSWORD="my-secret-password"[K
TESTER_IMAGE="research-kg-app-embedding-tester:latest"[K
APP_DIR="$(pwd)"[K[4A[32C[22Ddocker run --rm \     [1B    --network "$NETWORK_NAME" \[1B    -v "$APP_DIR":/app \[K[1B    -w /app \[K[1B-it "$TESTER_IMAGE" /bin/bash[4A[14C[?1l>[?2004l[4B
]2;docker run --rm --network "$NETWORK_NAME" -v "$APP_DIR":/app -w /app -it  ]1;docker[?2004hroot@591efe620be4:/app# python -m,m[K[K[K[Kscripts/[K[K[K[K[K[K[Krc/scripts/init_graph_db.py
[?2004lTraceback (most recent call last):
  File "/app/src/scripts/init_graph_db.py", line 15, in <module>
    from src.services.graph_db import get_graph_db_service
ModuleNotFoundError: No module named 'src'
[?2004hroot@591efe620be4:/app# python src/scripts/init_graph_db.py[C[K[K[K[1Pinit_graph_db.init_graph_db[1Pscripts.init_graph_db.scripts.init_graph_db-src.scripts.init_graph_dbmsrc.scripts.init_graph_db src.scripts.init_graph_db
[?2004l2025-09-24 15:50:40,187 - INFO - Initialized ArangoDB service with host: http://localhost:8529
2025-09-24 15:50:40,190 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f970a6d8040>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:50:42,193 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f970a6d8250>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:50:46,201 - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f970a6d8340>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:50:46,206 - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f970a6d88b0>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
2025-09-24 15:50:48,210 - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f970a6d8a00>: Failed to establish a new connection: [Errno 111] Connection refused')': /_db/_system/_api/database
^CTraceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f970a6d8bb0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/local/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/app/src/scripts/init_graph_db.py", line 296, in <module>
    asyncio.run(main())
  File "/usr/local/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 634, in run_until_complete
    self.run_forever()
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 601, in run_forever
    self._run_once()
  File "/usr/local/lib/python3.9/asyncio/base_events.py", line 1905, in _run_once
    handle._run()
  File "/usr/local/lib/python3.9/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/app/src/scripts/init_graph_db.py", line 281, in main
    if not await initializer.check_connection():
  File "/app/src/scripts/init_graph_db.py", line 264, in check_connection
    if await self.graph_db.connect():
  File "/app/src/services/graph_db/arangodb.py", line 39, in connect
    if not sys_db.has_database(self.database_name):
  File "/usr/local/lib/python3.9/site-packages/arango/database.py", line 1294, in has_database
    return self._execute(request, response_handler)
  File "/usr/local/lib/python3.9/site-packages/arango/api.py", line 74, in _execute
    return self._executor.execute(request, response_handler)
  File "/usr/local/lib/python3.9/site-packages/arango/executor.py", line 66, in execute
    resp = self._conn.send_request(request)
  File "/usr/local/lib/python3.9/site-packages/arango/connection.py", line 323, in send_request
    return self.process_request(host_index, request, auth=self._auth)
  File "/usr/local/lib/python3.9/site-packages/arango/connection.py", line 169, in process_request
    resp = self._http.send_request(
  File "/usr/local/lib/python3.9/site-packages/arango/http.py", line 230, in send_request
    response = session.request(
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 644, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 871, in urlopen
    return self.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 871, in urlopen
    return self.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 844, in urlopen
    retries.sleep()
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 363, in sleep
    self._sleep_backoff()
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 347, in _sleep_backoff
    time.sleep(backoff)
KeyboardInterrupt

[?2004hroot@591efe620be4:/app# [?2004l
exit
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;31mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hdocker run --rm \
    --network "$NETWORK_NAME" \[K
    -v "$APP_DIR":/app \[K
    -w /app \[K
-it "$TESTER_IMAGE" /bin/bash[K[4A[14C[17DNETWORK_NAME="app-net"[1BARANGO_CONTAINER="arangodb"[K[1BARANGO_ROOT_PASSWORD="my-secret-password"[1BTESTER_IMAGE="research-kg-app-embedding-tester:latest"[1BAPP_DIR="$(pwd)"[K[4A[32C[22Ddocker run --rm \     [1B    --network "$NETWORK_NAME" \[1B    -v "$APP_DIR":/app \                 [1B    -w /app \                                         [1B-it "$TESTER_IMAGE" /bin/bash[4A[14C[4B    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \
    -e ARANGODB_USERNAME="root" \[K
    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[K
    -e ARANGODB_DATABASE="_system" \[K
    -it "$TESTER_IMAGE" /bin/bash[K
[K[9A[43C[9B[K[9A[43C[?1l>[?2004l[9B
]2;docker run --rm --network "$NETWORK_NAME" -v "$APP_DIR":/app -w /app -e  -e  ]1;docker[?2004hroot@fd95f91394de:/app# echo $[7mARANGODB_USERNAME[27mARANGODB_USERNAME
[?2004lroot
[?2004hroot@fd95f91394de:/app# echo [7mARANGODB_USERNAME[27mARANGODB_USERNAME[C[C[C[C[C$ARANGODB_USERNAME
[?2004lroot
[?2004hroot@fd95f91394de:/app# echo $ARANGODB_USERNAME[K[K[K[K[K[K[K[KDATABASE 
[?2004l_system
[?2004hroot@fd95f91394de:/app# echo $ARANGODB_DATABASE [1PUSERNAME[K[?2004l
exit
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hdocker run --rm \
    --network "$NETWORK_NAME" \[K
    -v "$APP_DIR":/app \[K
    -w /app \[K
    -e ARANGODB_HOST="http://$ARANGO_CONTAINER:8529" \[K
    -e ARANGODB_USERNAME="root" \[K
    -e ARANGODB_PASSWORD="$ARANGO_ROOT_PASSWORD" \[K
    -e ARANGODB_DATABASE="_system" \[K
    -it "$TESTER_IMAGE" /bin/bash[K
[K[9A[43C[9B[K[9A[43C[?1l>[?2004l[9B
]2;docker run --rm --network "$NETWORK_NAME" -v "$APP_DIR":/app -w /app -e  -e  ]1;docker[?2004hroot@6171de128fb3:/app# python -m ser[K[Krc/scrp[Kipts/[K[K[K[K[K[K[K[K[K.scripts.ar[K[Kinit_graph_db
[?2004l2025-09-24 15:55:44,267 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:55:44,274 - ERROR - Error connecting to ArangoDB: [HTTP 400][ERR 1208] illegal name: database name invalid
2025-09-24 15:55:44,274 - ERROR - âŒ Failed to connect to ArangoDB
[?2004hroot@6171de128fb3:/app# python -m src.scripts.init_graph_db
[?2004l2025-09-24 15:56:13,833 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:56:13,840 - ERROR - Error connecting to ArangoDB: [HTTP 400][ERR 1208] illegal name: database name invalid
2025-09-24 15:56:13,840 - ERROR - âŒ Failed to connect to ArangoDB
[?2004hroot@6171de128fb3:/app# [H[2Jroot@6171de128fb3:/app# python -m src.scripts.init_graph_db
[?2004l2025-09-24 15:56:20,903 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:56:20,909 - ERROR - Error connecting to ArangoDB: [HTTP 400][ERR 1208] illegal name: database name invalid
2025-09-24 15:56:20,909 - ERROR - âŒ Failed to connect to ArangoDB
[?2004hroot@6171de128fb3:/app# python -m src.scripts.init_graph_db
[?2004ltest_graph_db
2025-09-24 15:56:45,042 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
2025-09-24 15:56:45,047 - ERROR - Error connecting to ArangoDB: [HTTP 400][ERR 1208] illegal name: database name invalid
2025-09-24 15:56:45,047 - ERROR - âŒ Failed to connect to ArangoDB
[?2004hroot@6171de128fb3:/app# python -m src.scripts.init_graph_db
[?2004ltest_graph_db
2025-09-24 15:57:07,849 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
creating
2025-09-24 15:57:07,855 - ERROR - Error connecting to ArangoDB: [HTTP 400][ERR 1208] illegal name: database name invalid
2025-09-24 15:57:07,855 - ERROR - âŒ Failed to connect to ArangoDB
[?2004hroot@6171de128fb3:/app# ^C[?2004l[?2004h[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C^C[?2004l[?2004h[?2004l
[?2004hroot@6171de128fb3:/app# python -m src.scripts.init_graph_db
[?2004ltest_graph_db
2025-09-24 15:57:51,726 - INFO - Initialized ArangoDB service with host: http://arangodb:8529
creating 
2025-09-24 15:57:51,737 - INFO - Created new database: test_graph_db
2025-09-24 15:57:51,737 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:57:51,737 - INFO - âœ… Successfully connected to ArangoDB
2025-09-24 15:57:51,738 - INFO - Disconnected from ArangoDB
2025-09-24 15:57:51,738 - INFO - Starting graph database initialization...
2025-09-24 15:57:51,740 - INFO - Connected to ArangoDB database: _system
2025-09-24 15:57:51,743 - INFO - Created node collection: nodes_paper
2025-09-24 15:57:51,746 - INFO - Created node collection: nodes_person
2025-09-24 15:57:51,750 - INFO - Created node collection: nodes_organization
2025-09-24 15:57:51,753 - INFO - Created node collection: nodes_location
2025-09-24 15:57:51,756 - INFO - Created node collection: nodes_concept
2025-09-24 15:57:51,761 - INFO - Created node collection: nodes_methodology
2025-09-24 15:57:51,765 - INFO - Created edge collection: edges_cites - CITATION relationships between papers
2025-09-24 15:57:51,769 - INFO - Created edge collection: edges_authored_by - AUTHOR relationships between papers and people
2025-09-24 15:57:51,772 - INFO - Created edge collection: edges_contains - CONTAINS relationships between papers and entities
2025-09-24 15:57:51,775 - INFO - Created edge collection: edges_related_to - GENERIC relationships between entities
2025-09-24 15:57:51,778 - INFO - Created edge collection: edges_belongs_to - MEMBERSHIP relationships (e.g., person to organization)
2025-09-24 15:57:51,782 - INFO - Created edge collection: edges_located_at - LOCATION relationships
2025-09-24 15:57:51,786 - INFO - Created edge collection: edges_uses - USAGE relationships (e.g., paper uses methodology)
2025-09-24 15:57:51,789 - INFO - Created knowledge graph: knowledge_graph
/app/src/scripts/init_graph_db.py:228: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:57:51,794 - INFO - Created index on nodes_paper for fields: ['label']
2025-09-24 15:57:51,796 - INFO - Created index on nodes_paper for fields: ['type']
2025-09-24 15:57:51,799 - INFO - Created index on nodes_paper for fields: ['created_at']
2025-09-24 15:57:51,804 - INFO - Created index on nodes_paper for fields: ['owner_id']
2025-09-24 15:57:51,806 - INFO - Created index on nodes_person for fields: ['label']
2025-09-24 15:57:51,808 - INFO - Created index on nodes_person for fields: ['type']
2025-09-24 15:57:51,810 - INFO - Created index on nodes_person for fields: ['created_at']
2025-09-24 15:57:51,812 - INFO - Created index on nodes_person for fields: ['owner_id']
2025-09-24 15:57:51,815 - INFO - Created index on nodes_methodology for fields: ['label']
2025-09-24 15:57:51,818 - INFO - Created index on nodes_methodology for fields: ['type']
2025-09-24 15:57:51,821 - INFO - Created index on nodes_methodology for fields: ['created_at']
2025-09-24 15:57:51,823 - INFO - Created index on nodes_methodology for fields: ['owner_id']
2025-09-24 15:57:51,825 - INFO - Created index on nodes_concept for fields: ['label']
2025-09-24 15:57:51,827 - INFO - Created index on nodes_concept for fields: ['type']
2025-09-24 15:57:51,829 - INFO - Created index on nodes_concept for fields: ['created_at']
2025-09-24 15:57:51,832 - INFO - Created index on nodes_concept for fields: ['owner_id']
2025-09-24 15:57:51,834 - INFO - Created index on nodes_location for fields: ['label']
2025-09-24 15:57:51,837 - INFO - Created index on nodes_location for fields: ['type']
2025-09-24 15:57:51,842 - INFO - Created index on nodes_location for fields: ['created_at']
2025-09-24 15:57:51,845 - INFO - Created index on nodes_location for fields: ['owner_id']
2025-09-24 15:57:51,847 - INFO - Created index on nodes_organization for fields: ['label']
2025-09-24 15:57:51,850 - INFO - Created index on nodes_organization for fields: ['type']
2025-09-24 15:57:51,853 - INFO - Created index on nodes_organization for fields: ['created_at']
2025-09-24 15:57:51,855 - INFO - Created index on nodes_organization for fields: ['owner_id']
/app/src/scripts/init_graph_db.py:248: DeprecationWarning: add_persistent_index is deprecated. Using add_index with {'type': 'persistent'} instead.
  collection.add_persistent_index(
2025-09-24 15:57:51,859 - INFO - Created index on edges_authored_by for fields: ['label']
2025-09-24 15:57:51,861 - INFO - Created index on edges_authored_by for fields: ['type']
2025-09-24 15:57:51,864 - INFO - Created index on edges_authored_by for fields: ['created_at']
2025-09-24 15:57:51,866 - INFO - Created index on edges_authored_by for fields: ['owner_id']
2025-09-24 15:57:51,868 - INFO - Created index on edges_contains for fields: ['label']
2025-09-24 15:57:51,870 - INFO - Created index on edges_contains for fields: ['type']
2025-09-24 15:57:51,873 - INFO - Created index on edges_contains for fields: ['created_at']
2025-09-24 15:57:51,877 - INFO - Created index on edges_contains for fields: ['owner_id']
2025-09-24 15:57:51,879 - INFO - Created index on edges_related_to for fields: ['label']
2025-09-24 15:57:51,882 - INFO - Created index on edges_related_to for fields: ['type']
2025-09-24 15:57:51,884 - INFO - Created index on edges_related_to for fields: ['created_at']
2025-09-24 15:57:51,886 - INFO - Created index on edges_related_to for fields: ['owner_id']
2025-09-24 15:57:51,888 - INFO - Created index on edges_belongs_to for fields: ['label']
2025-09-24 15:57:51,891 - INFO - Created index on edges_belongs_to for fields: ['type']
2025-09-24 15:57:51,893 - INFO - Created index on edges_belongs_to for fields: ['created_at']
2025-09-24 15:57:51,896 - INFO - Created index on edges_belongs_to for fields: ['owner_id']
2025-09-24 15:57:51,898 - INFO - Created index on edges_located_at for fields: ['label']
2025-09-24 15:57:51,900 - INFO - Created index on edges_located_at for fields: ['type']
2025-09-24 15:57:51,902 - INFO - Created index on edges_located_at for fields: ['created_at']
2025-09-24 15:57:51,905 - INFO - Created index on edges_located_at for fields: ['owner_id']
2025-09-24 15:57:51,907 - INFO - Created index on edges_uses for fields: ['label']
2025-09-24 15:57:51,909 - INFO - Created index on edges_uses for fields: ['type']
2025-09-24 15:57:51,911 - INFO - Created index on edges_uses for fields: ['created_at']
2025-09-24 15:57:51,914 - INFO - Created index on edges_uses for fields: ['owner_id']
2025-09-24 15:57:51,916 - INFO - Created index on edges_cites for fields: ['label']
2025-09-24 15:57:51,919 - INFO - Created index on edges_cites for fields: ['type']
2025-09-24 15:57:51,921 - INFO - Created index on edges_cites for fields: ['created_at']
2025-09-24 15:57:51,923 - INFO - Created index on edges_cites for fields: ['owner_id']
2025-09-24 15:57:51,923 - INFO - Graph database initialization completed successfully
2025-09-24 15:57:51,923 - INFO - Disconnected from ArangoDB
2025-09-24 15:57:51,924 - INFO - ðŸŽ‰ Graph database initialization completed successfully!
[?2004hroot@6171de128fb3:/app# (reverse-i-search)`': [K[2@root@6171de128fb3:/app#[C[?2004l
exit
[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004hCCOC  ccoo jn  nda env list[?1l>[?2004l
]2;conda env list]1;conda# conda environments:
#
base                  *  /Users/shrisha/miniconda3
bbml                     /Users/shrisha/miniconda3/envs/bbml
crypto                   /Users/shrisha/miniconda3/envs/crypto
db-jlab                  /Users/shrisha/miniconda3/envs/db-jlab
db-jlabp36               /Users/shrisha/miniconda3/envs/db-jlabp36
db-pycharm               /Users/shrisha/miniconda3/envs/db-pycharm
fiddler                  /Users/shrisha/miniconda3/envs/fiddler
gpt                      /Users/shrisha/miniconda3/envs/gpt
lmt                      /Users/shrisha/miniconda3/envs/lmt
news_agg                 /Users/shrisha/miniconda3/envs/news_agg
py27                     /Users/shrisha/miniconda3/envs/py27
py37-test                /Users/shrisha/miniconda3/envs/py37-test
pytorch                  /Users/shrisha/miniconda3/envs/pytorch
qc                       /Users/shrisha/miniconda3/envs/qc
regrbm                   /Users/shrisha/miniconda3/envs/regrbm
research-graph           /Users/shrisha/miniconda3/envs/research-graph
tfv1                     /Users/shrisha/miniconda3/envs/tfv1
                         /opt/anaconda3

[1m[7m%[27m[1m[0m                                                                                           ]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app]2;shrisha@Shrishas-MacBook-Pro]1;..search-kg-app]7;file://Shrishas-MacBook-Pro.local/Users/shrisha/Documents/MVPs/app/research-kg-app[0m[27m[24m[J(base) [01;32mâžœ  [36mresearch-kg-app[00m [K[?1h=[?2004h